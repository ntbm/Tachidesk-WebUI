(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[0],{204:function(e,t,n){},206:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(11),i=n.n(r),o=n(5),s=n(17),l=n(23),d=n(281),u=n(280),j=n(152),b=n(279),h=n(245),p=n(253),g=n(254),O=n(57),f=n(209),m=n(137),x=n.n(m),v=n(1),y=c.a.createContext({title:"Tachidesk",setTitle:function(){},action:Object(v.jsx)("div",{}),setAction:function(){},override:{status:!1,value:Object(v.jsx)("div",{})},setOverride:function(){}}),w=c.a.createContext({darkTheme:!0,setDarkTheme:function(){}}),k=n(248),C=n(250),N=n(208),S=n(251),L=n(132),E=n.n(L),R=n(134),T=n.n(R),I=n(133),P=n.n(I),D=n(135),F=n.n(D),B=n(252),A=n(136),U=n.n(A),W=Object(h.a)({list:{width:250}});function H(e){var t=e.drawerOpen,n=e.setDrawerOpen,a=W();return Object(v.jsx)("div",{children:Object(v.jsx)(k.a,{open:t,anchor:"left",onClose:function(){return n(!1)},children:Object(v.jsx)("div",{className:a.list,role:"presentation",onClick:function(){return n(!1)},onKeyDown:function(){return n(!1)},children:Object(v.jsxs)(C.a,{children:[Object(v.jsx)(s.b,{to:"/library",style:{color:"inherit",textDecoration:"none"},children:Object(v.jsxs)(N.a,{button:!0,children:[Object(v.jsx)(S.a,{children:Object(v.jsx)(E.a,{})}),Object(v.jsx)(B.a,{primary:"Library"})]},"Library")}),Object(v.jsx)(s.b,{to:"/manga/extensions",style:{color:"inherit",textDecoration:"none"},children:Object(v.jsxs)(N.a,{button:!0,children:[Object(v.jsx)(S.a,{children:Object(v.jsx)(P.a,{})}),Object(v.jsx)(B.a,{primary:"Extensions"})]},"Extensions")}),Object(v.jsx)(s.b,{to:"/manga/sources",style:{color:"inherit",textDecoration:"none"},children:Object(v.jsxs)(N.a,{button:!0,children:[Object(v.jsx)(S.a,{children:Object(v.jsx)(T.a,{})}),Object(v.jsx)(B.a,{primary:"Sources"})]},"Sources")}),Object(v.jsx)(s.b,{to:"/manga/downloads",style:{color:"inherit",textDecoration:"none"},children:Object(v.jsxs)(N.a,{button:!0,children:[Object(v.jsx)(S.a,{children:Object(v.jsx)(F.a,{})}),Object(v.jsx)(B.a,{primary:"Downloadsz"})]},"Manga Download Queue")}),Object(v.jsx)(s.b,{to:"/settings",style:{color:"inherit",textDecoration:"none"},children:Object(v.jsxs)(N.a,{button:!0,children:[Object(v.jsx)(S.a,{children:Object(v.jsx)(U.a,{})}),Object(v.jsx)(B.a,{primary:"Settings"})]},"settings")})]})})})})}var z=Object(h.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function M(){var e=z(),t=Object(a.useState)(!1),n=Object(o.a)(t,2),c=n[0],r=n[1],i=Object(a.useContext)(y),s=i.title,l=i.action,d=i.override,u=Object(a.useContext)(w).darkTheme;return Object(v.jsxs)(v.Fragment,{children:[d.status&&d.value,!d.status&&Object(v.jsxs)("div",{className:e.root,children:[Object(v.jsx)(p.a,{position:"fixed",color:u?"default":"primary",children:Object(v.jsxs)(g.a,{children:[Object(v.jsx)(f.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",disableRipple:!0,onClick:function(){return r(!0)},children:Object(v.jsx)(x.a,{})}),Object(v.jsx)(O.a,{variant:"h6",className:e.title,children:s}),l]})}),Object(v.jsx)(H,{drawerOpen:c,setDrawerOpen:r})]})]})}var V={getItem:function(e,t){try{var n=window.localStorage.getItem(e);if(null!==n)return JSON.parse(n);window.localStorage.setItem(e,JSON.stringify(t))}finally{}return t},setItem:function(e,t){try{window.localStorage.setItem(e,JSON.stringify(t))}finally{}}};function J(e,t){var n=t instanceof Function?t():t,c=Object(a.useState)(V.getItem(e,n)),r=Object(o.a)(c,2),i=r[0],s=r[1];return[i,function(t){var n=t instanceof Function?t(i):t;s(n),V.setItem(e,n)}]}var X=n(27),G=n(288),q=n(261),Y=n(256),K=n(257),Q=n(260),Z=n(255),_=n(259),$=n(63),ee=n.n($),te=n(258),ne=[{code:"all",name:"All",nativeName:"All"},{code:"installed",name:"Installed",nativeName:"Installed"},{code:"updates pending",name:"Updates pending",nativeName:"Updates pending"},{code:"en",name:"English",nativeName:"English"},{code:"ca",name:"Catalan; Valencian",nativeName:"Catal\xe0"},{code:"de",name:"German",nativeName:"Deutsch"},{code:"es",name:"Spanish; Castilian",nativeName:"Espa\xf1ol"},{code:"fr",name:"French",nativeName:"Fran\xe7ais"},{code:"id",name:"Indonesian",nativeName:"Indonesia"},{code:"it",name:"Italian",nativeName:"Italiano"},{code:"pt",name:"Portuguese",nativeName:"Portugu\xeas"},{code:"vi",name:"Vietnamese",nativeName:"Ti\u1ebfng Vi\u1ec7t"},{code:"tr",name:"Turkish",nativeName:"T\xfcrk\xe7e"},{code:"ru",name:"Russian",nativeName:"\u0440\u0443\u0441\u0441\u043a\u0438\u0439"},{code:"ar",name:"Arabic",nativeName:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"},{code:"hi",name:"Hindi",nativeName:"\u0939\u093f\u0928\u094d\u0926\u0940"},{code:"th",name:"Thai",nativeName:"\u0e44\u0e17\u0e22"},{code:"zh",name:"Chinese",nativeName:"\u4e2d\u6587"},{code:"ja",name:"Japanese",nativeName:"\u65e5\u672c\u8a9e"},{code:"ko",name:"Korean",nativeName:"\ud55c\uad6d\uc5b4"},{code:"zu",name:"Zulu",nativeName:"isiZulu"},{code:"xh",name:"Xhosa",nativeName:"isiXhosa"},{code:"uk",name:"Ukrainian",nativeName:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430"},{code:"ro",name:"Romanian",nativeName:"Rom\xe2n\u0103"},{code:"bg",name:"Bulgarian",nativeName:"\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438"},{code:"cs",name:"Czech",nativeName:"\u010de\u0161tina"},{code:"pl",name:"Polish",nativeName:"polski"},{code:"no",name:"Norwegian",nativeName:"Norsk"},{code:"nl",name:"Dutch",nativeName:"Nederlands"},{code:"my",name:"Burmese",nativeName:"\u1017\u1019\u102c\u1005\u102c"},{code:"ms",name:"Malay",nativeName:"Malaysia"},{code:"mn",name:"Mongolian",nativeName:"\u041c\u043e\u043d\u0433\u043e\u043b"},{code:"ml",name:"Malayalam",nativeName:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02"},{code:"ku",name:"Kurdish",nativeName:"Kurd\xee"},{code:"hu",name:"Hungarian",nativeName:"Magyar"},{code:"hr",name:"Croatian",nativeName:"Hrvatski"},{code:"he",name:"Hebrew",nativeName:"\u05e2\u05d1\u05e8\u05d9\u05ea"},{code:"fil",name:"Filipino",nativeName:"Filipino"},{code:"fi",name:"Finnish",nativeName:"suomi"},{code:"fa",name:"Persian",nativeName:"\u0641\u0627\u0631\u0633\u06cc"},{code:"eu",name:"Basque",nativeName:"euskara"},{code:"el",name:"Greek",nativeName:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac"},{code:"da",name:"Danish",nativeName:"dansk"}];function ae(e){for(var t=-1!==e.indexOf("-")?e.indexOf("-"):e.length,n=e.toLocaleLowerCase().substring(0,t),a="Error",c=0;c<ne.length;c++)ne[c].code===n&&(a=ne[c].nativeName);return-1!==e.indexOf("-")&&(a="".concat(a," (").concat(e.substring(t+1),")")),a}var ce=function(e,t){var n=ae(e),a=ae(t);return"en"===e?-1:"en"===t||n>a?1:-1};function re(e){return JSON.parse(JSON.stringify(e))}var ie=Object(h.a)((function(){return Object(G.a)({paper:{maxHeight:435,width:"80%"}})}));function oe(e){var t=e.shownLangs,n=e.setShownLangs,c=e.allLangs,r=Object(a.useState)(t),i=Object(o.a)(r,2),s=i[0],l=i[1],d=ie(),u=Object(a.useState)(!1),j=Object(o.a)(u,2),b=j[0],h=j[1];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(f.a,{onClick:function(){return h(!0)},"aria-label":"display more actions",edge:"end",color:"inherit",children:Object(v.jsx)(ee.a,{})}),Object(v.jsxs)(Z.a,{classes:d,maxWidth:"xs",open:b,children:[Object(v.jsx)(Y.a,{children:"Enabled Languages"}),Object(v.jsx)(K.a,{dividers:!0,style:{padding:0},children:Object(v.jsx)(C.a,{children:c.map((function(e){return Object(v.jsxs)(N.a,{children:[Object(v.jsx)(B.a,{primary:ae(e)}),Object(v.jsx)(te.a,{children:Object(v.jsx)(_.a,{checked:-1!==s.indexOf(e),onChange:function(t){return function(e,t){if(e.target.checked)l([].concat(Object(X.a)(s),[t]));else{var n=re(s);n.splice(n.indexOf(t),1),l(n)}}(t,e)}})})]},e)}))})}),Object(v.jsxs)(Q.a,{children:[Object(v.jsx)(q.a,{autoFocus:!0,onClick:function(){h(!1)},color:"primary",children:"Cancel"}),Object(v.jsx)(q.a,{onClick:function(){h(!1),n(s)},color:"primary",children:"Ok"})]})]})]})}var se=n(262),le=n(263),de=n(289),ue=Object(h.a)((function(e){return{root:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:16},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12},icon:{width:e.spacing(7),height:e.spacing(7),flex:"0 0 auto",marginRight:16}}}));function je(e){var t=e.source,n=t.id,a=t.name,c=t.lang,r=t.iconUrl,i=t.supportsLatest,s=t.isConfigurable,l=J("serverBaseURL",""),d=Object(o.a)(l,1)[0],u=ue();return Object(v.jsx)(se.a,{children:Object(v.jsxs)(le.a,{className:u.root,children:[Object(v.jsxs)("div",{style:{display:"flex"},children:[Object(v.jsx)(de.a,{variant:"rounded",className:u.icon,alt:a,src:d+r}),Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(v.jsx)(O.a,{variant:"h5",component:"h2",children:a}),Object(v.jsx)(O.a,{variant:"caption",display:"block",gutterBottom:!0,children:ae(c)})]})]}),Object(v.jsxs)("div",{style:{display:"flex"},children:[s&&Object(v.jsx)(q.a,{variant:"outlined",style:{marginLeft:20},onClick:function(){window.location.href="/sources/".concat(n,"/latest/")},children:"Configure"}),Object(v.jsx)(q.a,{variant:"outlined",style:{marginLeft:20},onClick:function(){window.location.href="/sources/".concat(n,"/search/")},children:"Search"}),i&&Object(v.jsx)(q.a,{variant:"outlined",style:{marginLeft:20},onClick:function(){window.location.href="/sources/".concat(n,"/latest/")},children:"Latest"}),Object(v.jsx)(q.a,{variant:"outlined",style:{marginLeft:20},onClick:function(){window.location.href="/sources/".concat(n,"/popular/")},children:"Browse"})]})]})})}var be,he=n(138),pe=n.n(he),ge=window.location,Oe=ge.hostname,fe=ge.port,me=ge.protocol;be="3000"===fe?"4567":fe;var xe=pe.a.create({baseURL:V.getItem("serverBaseURL","".concat(me,"//").concat(Oe,":").concat(be))});xe.interceptors.request.use((function(e){return e.data instanceof FormData&&Object.assign(e.headers,{"Content-Type":"multipart/form-data"}),e}));var ve=xe;function ye(e){var t=[];return e.forEach((function(e){-1===t.indexOf(e.lang)&&t.push(e.lang)})),t.sort(ce),t}function we(e){var t={};return e.forEach((function(e){void 0===t[e.lang]&&(t[e.lang]=[]),t[e.lang].push(e)})),t}function ke(){var e=Object(a.useContext)(y),t=e.setTitle,n=e.setAction,r=J("shownSourceLangs",["en"]),i=Object(o.a)(r,2),s=i[0],l=i[1],d=Object(a.useState)([]),u=Object(o.a)(d,2),j=u[0],b=u[1],h=Object(a.useState)(!1),p=Object(o.a)(h,2),g=p[0],O=p[1];return Object(a.useEffect)((function(){t("Sources"),n(Object(v.jsx)(oe,{shownLangs:s,setShownLangs:l,allLangs:ye(j)}))}),[s,j]),Object(a.useEffect)((function(){ve.get("/api/v1/source/list").then((function(e){return e.data})).then((function(e){b(e),O(!0)}))}),[]),0===j.length?g?Object(v.jsx)("h3",{children:"No sources found. Install Some Extensions first."}):Object(v.jsx)("h3",{children:"loading..."}):Object(v.jsx)(v.Fragment,{children:Object.entries(we(j)).sort((function(e,t){return ce(e[0],t[0])})).map((function(e){var t=Object(o.a)(e,2),n=t[0],a=t[1];return-1!==s.indexOf(n)&&Object(v.jsxs)(c.a.Fragment,{children:[Object(v.jsx)("h1",{style:{marginLeft:25},children:ae(n)},n),a.map((function(e){return Object(v.jsx)(je,{source:e},e.id)}))]},n)}))})}var Ce=Object(h.a)((function(e){return{root:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:16},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12},icon:{width:e.spacing(7),height:e.spacing(7),flex:"0 0 auto",marginRight:16}}}));function Ne(e){var t=e.source,n=t.id,a=t.name,c=t.lang,r=t.iconUrl,i=t.supportsLatest,s=J("serverBaseURL",""),l=Object(o.a)(s,1)[0],d=Ce();return Object(v.jsx)(se.a,{children:Object(v.jsxs)(le.a,{className:d.root,children:[Object(v.jsxs)("div",{style:{display:"flex"},children:[Object(v.jsx)(de.a,{variant:"rounded",className:d.icon,alt:a,src:l+r}),Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(v.jsx)(O.a,{variant:"h5",component:"h2",children:a}),Object(v.jsx)(O.a,{variant:"caption",display:"block",gutterBottom:!0,children:ae(c)})]})]}),Object(v.jsxs)("div",{style:{display:"flex"},children:[Object(v.jsx)(q.a,{variant:"outlined",style:{marginLeft:20},onClick:function(){window.location.href="/anime/sources/".concat(n,"/search/")},children:"Search"}),i&&Object(v.jsx)(q.a,{variant:"outlined",style:{marginLeft:20},onClick:function(){window.location.href="/anime/sources/".concat(n,"/latest/")},children:"Latest"}),Object(v.jsx)(q.a,{variant:"outlined",style:{marginLeft:20},onClick:function(){window.location.href="/anime/sources/".concat(n,"/popular/")},children:"Browse"})]})]})})}function Se(e){var t=[];return e.forEach((function(e){-1===t.indexOf(e.lang)&&t.push(e.lang)})),t.sort(ce),t}function Le(e){var t={};return e.forEach((function(e){void 0===t[e.lang]&&(t[e.lang]=[]),t[e.lang].push(e)})),t}function Ee(){var e=Object(a.useContext)(y),t=e.setTitle,n=e.setAction,r=J("shownSourceLangs",["en"]),i=Object(o.a)(r,2),s=i[0],l=i[1],d=Object(a.useState)([]),u=Object(o.a)(d,2),j=u[0],b=u[1],h=Object(a.useState)(!1),p=Object(o.a)(h,2),g=p[0],O=p[1];return Object(a.useEffect)((function(){t("Sources"),n(Object(v.jsx)(oe,{shownLangs:s,setShownLangs:l,allLangs:Se(j)}))}),[s,j]),Object(a.useEffect)((function(){ve.get("/api/v1/anime/source/list").then((function(e){return e.data})).then((function(e){b(e),O(!0)}))}),[]),0===j.length?g?Object(v.jsx)("h3",{children:"No sources found. Install Some Extensions first."}):Object(v.jsx)("h3",{children:"loading..."}):Object(v.jsx)(v.Fragment,{children:Object.entries(Le(j)).sort((function(e,t){return ce(e[0],t[0])})).map((function(e){var t=Object(o.a)(e,2),n=t[0],a=t[1];return-1!==s.indexOf(n)&&Object(v.jsxs)(c.a.Fragment,{children:[Object(v.jsx)("h1",{style:{marginLeft:25},children:ae(n)},n),a.map((function(e){return Object(v.jsx)(Ne,{source:e},e.id)}))]},n)}))})}var Re=n(139),Te=n.n(Re),Ie=n(140),Pe=n.n(Ie),De=n(141),Fe=n.n(De),Be=n(142),Ae=n.n(Be),Ue=n(86),We=n.n(Ue),He=n(143),ze=n.n(He),Me=n(264),Ve=n(284),Je=n(26);function Xe(e){return Object(v.jsx)(N.a,Object(Je.a)({button:!0,component:"a"},e))}function Ge(){var e=Object(a.useContext)(y),t=e.setTitle,n=e.setAction;Object(a.useEffect)((function(){t("Settings"),n(Object(v.jsx)(v.Fragment,{}))}),[]);var c=Object(a.useContext)(w),r=c.darkTheme,i=c.setDarkTheme,s=J("serverBaseURL",""),l=Object(o.a)(s,2),d=l[0],u=l[1],j=Object(a.useState)(!1),b=Object(o.a)(j,2),h=b[0],p=b[1],g=Object(a.useState)(d),O=Object(o.a)(g,2),m=O[0],x=O[1],k=function(){p(!1)};return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(C.a,{style:{padding:0},children:[Object(v.jsxs)(Xe,{href:"/settings/categories",children:[Object(v.jsx)(S.a,{children:Object(v.jsx)(Te.a,{})}),Object(v.jsx)(B.a,{primary:"Categories"})]}),Object(v.jsxs)(Xe,{href:"/settings/backup",children:[Object(v.jsx)(S.a,{children:Object(v.jsx)(Pe.a,{})}),Object(v.jsx)(B.a,{primary:"Backup"})]}),Object(v.jsxs)(N.a,{children:[Object(v.jsx)(S.a,{children:Object(v.jsx)(Fe.a,{})}),Object(v.jsx)(B.a,{primary:"Dark Theme"}),Object(v.jsx)(te.a,{children:Object(v.jsx)(_.a,{edge:"end",checked:r,onChange:function(){return i(!r)}})})]}),Object(v.jsxs)(N.a,{children:[Object(v.jsx)(S.a,{children:Object(v.jsx)(Ae.a,{})}),Object(v.jsx)(B.a,{primary:"Server Address",secondary:d}),Object(v.jsx)(te.a,{children:Object(v.jsx)(f.a,{onClick:function(){x(d),p(!0)},children:Object(v.jsx)(We.a,{})})})]}),Object(v.jsxs)(Xe,{href:"/settings/about",children:[Object(v.jsx)(S.a,{children:Object(v.jsx)(ze.a,{})}),Object(v.jsx)(B.a,{primary:"About"})]})]}),Object(v.jsxs)(Z.a,{open:h,onClose:k,children:[Object(v.jsxs)(K.a,{children:[Object(v.jsx)(Me.a,{children:"Enter new category name."}),Object(v.jsx)(Ve.a,{autoFocus:!0,margin:"dense",id:"name",label:"Category Name",type:"text",fullWidth:!0,value:m,onChange:function(e){return x(e.target.value)}})]}),Object(v.jsxs)(Q.a,{children:[Object(v.jsx)(q.a,{onClick:k,color:"primary",children:"Cancel"}),Object(v.jsx)(q.a,{onClick:function(){p(!1),u(m)},color:"primary",children:"Set"})]})]})]})}var qe=n(268),Ye=Object(h.a)({loading:{width:"100vw","& div":{margin:"50px auto",display:"block"}}});function Ke(){var e=Object(a.useContext)(y),t=e.setTitle,n=e.setAction,c=Ye(),r=Object(a.useState)(),i=Object(o.a)(r,2),s=i[0],l=i[1];if(Object(a.useEffect)((function(){t("About"),n(Object(v.jsx)(v.Fragment,{}))}),[]),Object(a.useEffect)((function(){ve.get("/api/v1/about").then((function(e){return e.data})).then((function(e){l(e)}))}),[]),void 0===s)return Object(v.jsx)("div",{className:c.loading,children:Object(v.jsx)(qe.a,{thickness:5})});return Object(v.jsxs)(C.a,{children:[Object(v.jsx)(N.a,{children:Object(v.jsx)(B.a,{primary:"Server",secondary:"".concat(s.name," ").concat(s.buildType)})}),Object(v.jsx)(N.a,{children:Object(v.jsx)(B.a,{primary:"Server version",secondary:"Stable"===s.buildType?"".concat(s.version):"".concat(s.version,"-").concat(s.revision)})}),Object(v.jsx)(N.a,{children:Object(v.jsx)(B.a,{primary:"Build time",secondary:new Date(1e3*s.buildTime).toUTCString()})}),Object(v.jsx)(Xe,{href:s.github,children:Object(v.jsx)(B.a,{primary:"Github",secondary:s.github})}),Object(v.jsx)(Xe,{href:s.discord,children:Object(v.jsx)(B.a,{primary:"Discord",secondary:s.discord})})]})}var Qe=n(51),Ze=n(87),_e=n.n(Ze),$e=n(29),et=n(269),tt=n(145),nt=n.n(tt),at=n(144),ct=n.n(at),rt=n(286),it=n(270);function ot(){var e=Object(a.useContext)(y),t=e.setTitle,n=e.setAction;Object(a.useEffect)((function(){t("Categories"),n(Object(v.jsx)(v.Fragment,{}))}),[]);var c=Object(a.useState)([]),r=Object(o.a)(c,2),i=r[0],s=r[1],l=Object(a.useState)(-1),d=Object(o.a)(l,2),u=d[0],j=d[1],b=Object(a.useState)(!1),h=Object(o.a)(b,2),p=h[0],g=h[1],O=Object(a.useState)(""),m=Object(o.a)(O,2),x=m[0],w=m[1],k=Object(a.useState)(!1),L=Object(o.a)(k,2),E=L[0],R=L[1],T=Object($e.a)(),I=Object(a.useState)(0),P=Object(o.a)(I,2),D=P[0],F=P[1],A=function(){return F(D+1)};Object(a.useEffect)((function(){p||ve.get("/api/v1/category/").then((function(e){return e.data})).then((function(e){return s(e)}))}),[D]);var U=function(){g(!1)};return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Qe.a,{onDragEnd:function(e){e.destination&&s(function(e,t,n){var a=e[t],c=new FormData;c.append("from","".concat(t+1)),c.append("to","".concat(n+1)),ve.post("/api/v1/category/".concat(a.id,"/reorder"),c).finally((function(){return A()}));var r=Array.from(e),i=r.splice(t,1),s=Object(o.a)(i,1)[0];return r.splice(n,0,s),r}(i,e.source.index,e.destination.index))},children:Object(v.jsx)(Qe.c,{droppableId:"droppable",children:function(e){return Object(v.jsxs)(C.a,{ref:e.innerRef,children:[i.map((function(e,t){return Object(v.jsx)(Qe.b,{draggableId:e.id.toString(),index:t,children:function(n,a){return Object(v.jsxs)(N.a,Object(Je.a)(Object(Je.a)(Object(Je.a)({ContainerProps:{ref:n.innerRef}},n.draggableProps),n.dragHandleProps),{},{style:(c=a.isDragging,r=n.draggableProps.style,o=T.palette,Object(Je.a)(Object(Je.a)({},r),c&&{background:"dark"===o.type?"#424242":"rgb(235,235,235)"})),ref:n.innerRef,children:[Object(v.jsx)(S.a,{children:Object(v.jsx)(_e.a,{})}),Object(v.jsx)(B.a,{primary:e.name}),Object(v.jsx)(f.a,{onClick:function(){!function(e){w(i[e].name),R(i[e].default),j(e),g(!0)}(t)},children:Object(v.jsx)(We.a,{})}),Object(v.jsx)(f.a,{onClick:function(){!function(e){var t=i[e];ve.delete("/api/v1/category/".concat(t.id)).finally((function(){return A()}))}(t)},children:Object(v.jsx)(ct.a,{})})]}));var c,r,o}},e.id)})),e.placeholder]})}})}),Object(v.jsx)(et.a,{color:"primary","aria-label":"add",style:{position:"absolute",bottom:T.spacing(2),right:T.spacing(2)},onClick:function(){w(""),R(!1),j(-1),g(!0)},children:Object(v.jsx)(nt.a,{})}),Object(v.jsxs)(Z.a,{open:p,onClose:U,children:[Object(v.jsx)(Y.a,{id:"form-dialog-title",children:-1===u?"New Catalog":"Edit Catalog"}),Object(v.jsxs)(K.a,{children:[Object(v.jsx)(Ve.a,{autoFocus:!0,margin:"dense",id:"name",label:"Category Name",type:"text",fullWidth:!0,value:x,onChange:function(e){return w(e.target.value)}}),Object(v.jsx)(it.a,{control:Object(v.jsx)(rt.a,{checked:E,onChange:function(e){return R(e.target.checked)},color:"default"}),label:"Default category when adding new manga to library"})]}),Object(v.jsxs)(Q.a,{children:[Object(v.jsx)(q.a,{onClick:U,color:"primary",children:"Cancel"}),Object(v.jsx)(q.a,{onClick:function(){g(!1);var e=new FormData;if(e.append("name",x),e.append("default",E.toString()),-1===u)ve.post("/api/v1/category/",e).finally((function(){return A()}));else{var t=i[u];ve.patch("/api/v1/category/".concat(t.id),e).finally((function(){return A()}))}},color:"primary",children:"Submit"})]})]})]})}var st=n(74),lt=n.n(st),dt=n(105),ut=n(106),jt=n.n(ut),bt=n(109);function ht(){var e=Object(a.useContext)(y),t=e.setTitle,n=e.setAction;Object(a.useEffect)((function(){t("Backup"),n(Object(v.jsx)(v.Fragment,{}))}),[]);var c=ve.defaults.baseURL,r=function(e){e.text().then((function(e){ve.post("/api/v1/backup/legacy/import",e,{headers:{"Content-Type":"application/json"}})}))},i=function(){var e=Object(dt.a)(lt.a.mark((function e(t){var n;return lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Object(bt.a)(t);case 3:n=e.sent,r(n[0]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(e){e.preventDefault()};return Object(a.useEffect)((function(){document.addEventListener("drop",i),document.addEventListener("dragover",o);var e=document.getElementById("backup-file");return null===e||void 0===e||e.addEventListener("change",function(){var e=Object(dt.a)(lt.a.mark((function e(t){var n;return lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(bt.a)(t);case 2:n=e.sent,r(n[0]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),function(){document.removeEventListener("drop",i),document.removeEventListener("dragover",o)}}),[]),Object(v.jsxs)(C.a,{style:{padding:0},children:[Object(v.jsxs)(Xe,{href:"".concat(c,"/api/v1/backup/legacy/export/file"),children:[Object(v.jsx)(S.a,{children:Object(v.jsx)(jt.a,{})}),Object(v.jsx)(B.a,{primary:"Create Legacy Backup",secondary:"Backup library as a Tachiyomi legacy backup"})]}),Object(v.jsxs)(N.a,{button:!0,onClick:function(){var e;return null===(e=document.getElementById("backup-file"))||void 0===e?void 0:e.click()},children:[Object(v.jsx)(S.a,{children:Object(v.jsx)(jt.a,{})}),Object(v.jsx)(B.a,{primary:"Restore Legacy Backup",secondary:"You can also drop the backup file anywhere to restore"}),Object(v.jsx)("input",{type:"file",name:"backup.json",id:"backup-file",style:{display:"none"}})]})]})}var pt=n(273),gt=n(282),Ot=n(271),ft=n(272);function mt(e){var t=e.src,n=e.alt,c=e.onImageLoad,r=e.imgRef,i=e.spinnerClassName,s=e.imgClassName,l=Object(a.useState)(""),d=Object(o.a)(l,2),u=d[0],j=d[1];return Object(a.useEffect)((function(){var e=new Image;return e.src=t,e.onload=function(){j(t),null===c||void 0===c||c()},function(){e.onload=null}}),[t]),0===u.length?Object(v.jsx)("div",{className:i,children:Object(v.jsx)(qe.a,{thickness:5})}):Object(v.jsx)("img",{className:s,ref:r,src:u,alt:n})}mt.defaultProps={spinnerClassName:"",imgClassName:"",onImageLoad:function(){},imgRef:void 0};var xt=Object(h.a)({root:{height:"100%",width:"100%",display:"flex"},wrapper:{position:"relative",height:"100%"},gradient:{position:"absolute",top:0,width:"100%",height:"100%",background:"linear-gradient(to bottom, transparent, #000000)",opacity:.5},title:{position:"absolute",bottom:0,padding:"0.5em",color:"white"},image:{height:"100%",width:"100%"},spinner:{minHeight:"400px",padding:"180px calc(50% - 20px)"}}),vt=c.a.forwardRef((function(e,t){var n=e.manga,a=n.id,c=n.title,r=n.thumbnailUrl,i=xt(),l=J("serverBaseURL",""),d=Object(o.a)(l,1)[0];return Object(v.jsx)(Ot.a,{item:!0,xs:6,sm:4,md:3,lg:2,children:Object(v.jsx)(s.b,{to:"/manga/".concat(a,"/"),children:Object(v.jsx)(se.a,{className:i.root,ref:t,children:Object(v.jsx)(ft.a,{children:Object(v.jsxs)("div",{className:i.wrapper,children:[Object(v.jsx)(mt,{alt:c,src:d+r,spinnerClassName:i.spinner,imgClassName:i.image}),Object(v.jsx)("div",{className:i.gradient}),Object(v.jsx)(O.a,{className:i.title,variant:"h5",component:"h2",children:c})]})})})})})}));function yt(e){var t,n=e.mangas,c=e.message,r=e.hasNextPage,i=e.lastPageNum,o=e.setLastPageNum,s=Object(a.useRef)(),l=function(){if(s.current){var e=s.current.getBoundingClientRect();(e.y+e.height)/window.innerHeight<2&&r&&o(i+1)}};return Object(a.useEffect)((function(){return window.addEventListener("scroll",l,!0),function(){window.removeEventListener("scroll",l,!0)}}),[r,n]),t=0===n.length?Object(v.jsx)("h3",{children:c}):n.map((function(e,t){return t===n.length-1?Object(v.jsx)(vt,{manga:e,ref:s}):Object(v.jsx)(vt,{manga:e})})),Object(v.jsx)(Ot.a,{container:!0,spacing:1,style:{margin:0,width:"100%",padding:"5px"},children:t})}function wt(e){var t=e.children,n=e.value,a=e.index;return Object(v.jsx)("div",{role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(a),children:n===a&&t})}function kt(){var e=Object(a.useContext)(y),t=e.setTitle,n=e.setAction;Object(a.useEffect)((function(){t("Library"),n(Object(v.jsx)(v.Fragment,{}))}),[]);var c,r=Object(a.useState)([]),i=Object(o.a)(r,2),s=i[0],l=i[1],d=Object(a.useState)(0),u=Object(o.a)(d,2),j=u[0],b=u[1],h=Object(a.useState)(1),p=Object(o.a)(h,2),g=p[0],O=p[1];if(Object(a.useEffect)((function(){Promise.all([ve.get("/api/v1/library").then((function(e){return e.data})),ve.get("/api/v1/category").then((function(e){return e.data}))]).then((function(e){var t=Object(o.a)(e,2),n=t[0],a=t[1].map((function(e){return{category:e,mangas:[],isFetched:!1}}));n.length>0||0===a.length?l([{category:{name:"Default",default:!0,order:0,id:-1},mangas:n,isFetched:!0}].concat(Object(X.a)(a))):(l(a),b(1))}))}),[]),Object(a.useEffect)((function(){s.forEach((function(e,t){e.category.order!==j||e.isFetched||ve.get("/api/v1/category/".concat(e.category.id)).then((function(e){return e.data})).then((function(e){var n=re(s);n[t].mangas=e,n[t].isFetched=!0,l(n)}))}))}),[j]),s.length>1){var f=s.map((function(e){return Object(v.jsx)(pt.a,{label:e.category.name,value:e.category.order})})),m=s.map((function(e){return Object(v.jsx)(wt,{value:j,index:e.category.order,children:Object(v.jsx)(yt,{mangas:e.mangas,hasNextPage:!1,lastPageNum:g,setLastPageNum:O,message:e.isFetched?"Category is Empty":"Loading..."})})})),x=window.innerWidth<160*s.length;c=Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(gt.a,{value:j,onChange:function(e,t){return function(e){b(e)}(t)},indicatorColor:"primary",textColor:"primary",centered:!x,variant:x?"scrollable":"fullWidth",scrollButtons:"on",children:f}),m]})}else{var w=1===s.length?s[0].mangas:[];c=Object(v.jsx)(yt,{mangas:w,hasNextPage:!1,lastPageNum:g,setLastPageNum:O,message:s.length>0?"Library is Empty":void 0})}return c}yt.defaultProps={message:"loading..."};var Ct=Object(h.a)((function(e){return{root:{TextField:{margin:e.spacing(1),width:"25ch"}}}}));function Nt(){var e=Object(a.useContext)(y),t=e.setTitle,n=e.setAction;Object(a.useEffect)((function(){t("Search"),n(Object(v.jsx)(v.Fragment,{}))}),[]);var r=Object(l.h)().sourceId,i=Ct(),s=Object(a.useState)(!1),d=Object(o.a)(s,2),u=d[0],j=d[1],b=Object(a.useState)([]),h=Object(o.a)(b,2),p=h[0],g=h[1],O=Object(a.useState)(""),f=Object(o.a)(O,2),m=f[0],x=f[1],w=Object(a.useState)(""),k=Object(o.a)(w,2),C=k[0],N=k[1],S=Object(a.useState)(!1),L=Object(o.a)(S,2),E=L[0],R=L[1],T=Object(a.useState)(1),I=Object(o.a)(T,2),P=I[0],D=I[1],F=c.a.createRef();function B(){if(F.current){var e=F.current.value;""===e?(j(!0),x("Type something to search")):(j(!1),N(e),g([]),x("loading..."))}}Object(a.useEffect)((function(){ve.get("/api/v1/source/".concat(r)).then((function(e){return e.data})).then((function(e){return t("Search: ".concat(e.name))}))}),[]),Object(a.useEffect)((function(){C.length>0&&ve.get("/api/v1/source/".concat(r,"/search/").concat(C,"/").concat(P)).then((function(e){return e.data})).then((function(e){x(""),e.mangaList.length>0?(g([].concat(Object(X.a)(p),Object(X.a)(e.mangaList.map((function(e){return{title:e.title,thumbnailUrl:e.thumbnailUrl,id:e.id}}))))),R(e.hasNextPage)):x("search query returned nothing.")}))}),[C]);var A=Object(v.jsx)(yt,{mangas:p,message:m,hasNextPage:E,lastPageNum:P,setLastPageNum:D});return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:i.root,children:[Object(v.jsx)(Ve.a,{inputRef:F,error:u,id:"standard-basic",label:"Search text..",onKeyDown:function(e){return"Enter"===e.key&&B()}}),Object(v.jsx)(q.a,{variant:"contained",color:"primary",onClick:function(){return B()},children:"Search"})]}),A]})}var St=n(25),Lt=n(93),Et=n(89),Rt=n.n(Et),Tt=n(153),It=n(274),Pt=n(88),Dt=n.n(Pt),Ft=Object(h.a)((function(e){return{root:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:16},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12},icon:{width:e.spacing(7),height:e.spacing(7),flex:"0 0 auto",marginRight:16}}}));function Bt(e){var t=Ft(),n=Object($e.a)(),a=e.chapter,r=e.triggerChaptersUpdate,i=e.downloadingString,l=a.uploadDate&&new Date(a.uploadDate).toISOString().slice(0,10),d=c.a.useState(null),u=Object(o.a)(d,2),j=u[0],b=u[1],h=function(){b(null)},p=function(e,t){h();var n=new FormData;n.append(e,t),ve.patch("/api/v1/manga/".concat(a.mangaId,"/chapter/").concat(a.index),n).then((function(){return r()}))},g="dark"===n.palette.type?"#acacac":"#b0b0b0";return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("li",{children:Object(v.jsx)(se.a,{children:Object(v.jsxs)(le.a,{className:t.root,children:[Object(v.jsx)(s.b,{to:"/manga/".concat(a.mangaId,"/chapter/").concat(a.index),style:{textDecoration:"none",color:a.read?g:n.palette.text.primary},children:Object(v.jsx)("div",{style:{display:"flex"},children:Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(v.jsxs)(O.a,{variant:"h5",component:"h2",children:[Object(v.jsx)("span",{style:{color:n.palette.primary.dark},children:a.bookmarked&&Object(v.jsx)(Dt.a,{})}),a.name,a.chapterNumber>0&&" : ".concat(a.chapterNumber)]}),Object(v.jsxs)(O.a,{variant:"caption",display:"block",gutterBottom:!0,children:[a.scanlator,a.scanlator&&" ",l,i]})]})})}),Object(v.jsx)(f.a,{"aria-label":"more",onClick:function(e){b(e.currentTarget)},children:Object(v.jsx)(Rt.a,{})}),Object(v.jsxs)(Tt.a,{anchorEl:j,keepMounted:!0,open:Boolean(j),onClose:h,children:[0===i.length&&Object(v.jsx)(It.a,{onClick:function(){ve.get("/api/v1/download/".concat(a.mangaId,"/chapter/").concat(a.index)),h()},children:"Download"}),Object(v.jsxs)(It.a,{onClick:function(){return p("bookmarked",!a.bookmarked)},children:[a.bookmarked&&"Remove bookmark",!a.bookmarked&&"Bookmark"]}),Object(v.jsxs)(It.a,{onClick:function(){return p("read",!a.read)},children:["Mark as"," ",a.read&&"unread",!a.read&&"read"]}),Object(v.jsx)(It.a,{onClick:function(){return p("markPrevRead",!0)},children:"Mark previous as Read"})]})]})})})})}var At=n(90),Ut=n.n(At),Wt=n(91),Ht=n.n(Wt),zt=n(92),Mt=n.n(zt),Vt=n(275),Jt=Object(h.a)((function(){return Object(G.a)({paper:{maxHeight:435,width:"80%"}})}));function Xt(e){var t=Jt(),n=e.open,c=e.setOpen,r=e.mangaId,i=Object(a.useState)([]),s=Object(o.a)(i,2),l=s[0],d=s[1],u=Object(a.useState)(0),j=Object(o.a)(u,2),b=j[0],h=j[1];Object(a.useEffect)((function(){var e=[];ve.get("/api/v1/category/").then((function(e){return e.data})).then((function(t){e=t.map((function(e){return{category:e,selected:!1}}))})).then((function(){ve.get("/api/v1/manga/".concat(r,"/category/")).then((function(e){return e.data})).then((function(t){t.forEach((function(t){e[t.order-1].selected=!0})),d(e)}))}))}),[b,n]);var p=function(e,t){(e.target.checked?ve.get:ve.delete)("/api/v1/manga/".concat(r,"/category/").concat(t)).then((function(){return h(b+1)}))};return Object(v.jsxs)(Z.a,{classes:t,maxWidth:"xs",open:n,children:[Object(v.jsx)(Y.a,{children:"Set categories"}),Object(v.jsx)(K.a,{dividers:!0,children:Object(v.jsxs)(Vt.a,{children:[0===l.length&&Object(v.jsxs)("span",{children:["No categories found!",Object(v.jsx)("br",{}),"You should make some from settings."]}),l.map((function(e){return Object(v.jsx)(it.a,{control:Object(v.jsx)(rt.a,{checked:e.selected,onChange:function(t){return p(t,e.category.id)},color:"default"}),label:e.category.name})}))]})}),Object(v.jsxs)(Q.a,{children:[Object(v.jsx)(q.a,{autoFocus:!0,onClick:function(){c(!1)},color:"primary",children:"Cancel"}),Object(v.jsx)(q.a,{onClick:function(){c(!1)},color:"primary",children:"Ok"})]})]})}function Gt(e){return e||"UNKNOWN"}function qt(e){var t=Object(a.useContext)(y).setAction,n=e.manga;null==n.genre&&(n.genre="");var c=Object(a.useState)(n.inLibrary?"In Library":"Add To Library"),r=Object(o.a)(c,2),i=r[0],s=r[1],l=Object(a.useState)(!1),d=Object(o.a)(l,2),u=d[0],j=d[1];Object(a.useEffect)((function(){t("In Library"===i?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(f.a,{onClick:function(){return j(!0)},"aria-label":"display more actions",edge:"end",color:"inherit",children:Object(v.jsx)(ee.a,{})}),Object(v.jsx)(Xt,{open:u,setOpen:j,mangaId:n.id})]}):Object(v.jsx)(v.Fragment,{}))}),[i,u]);var b,p=J("serverBaseURL",""),g=Object(o.a)(p,1)[0],O=function(e){return Object(h.a)((function(t){var n;return{root:Object(St.a)({width:"100%"},t.breakpoints.up("md"),{position:"sticky",top:"64px",left:"0px",width:"50vw",height:"calc(100vh - 64px)",alignSelf:"flex-start",overflowY:"auto"}),top:{padding:"10px"},leftRight:{display:"flex"},leftSide:{"& img":{borderRadius:4,maxWidth:"100%",minWidth:"100%",height:"auto"},maxWidth:"50%"},rightSide:Object(St.a)({marginLeft:15,maxWidth:"100%","& span":{fontWeight:"400"}},t.breakpoints.up("lg"),{fontSize:"1.3em"}),buttons:{display:"flex",justifyContent:"space-around","& button":{color:"In Library"===e?"#2196f3":"inherit"},"& span":{display:"block",fontSize:"0.85em"},"& a":{textDecoration:"none",color:"#858585","& button":{color:"inherit"}}},bottom:(n={paddingLeft:"10px",paddingRight:"10px"},Object(St.a)(n,t.breakpoints.up("md"),{fontSize:"1.2em"}),Object(St.a)(n,t.breakpoints.up("lg"),{fontSize:"1.3em"}),n),description:{"& h4":{marginTop:"1em",marginBottom:0},"& p":{textAlign:"justify",textJustify:"inter-word"}},genre:{display:"flex",flexWrap:"wrap","& h5":{border:"2px solid #2196f3",borderRadius:"1.13em",marginRight:"1em",marginTop:0,marginBottom:"10px",padding:"0.3em",color:"#2196f3"}}}}))}(i)();function m(){"Add To Library"===i?ve.get("/api/v1/manga/".concat(n.id,"/library/")).then((function(){s("In Library")})):ve.delete("/api/v1/manga/".concat(n.id,"/library/")).then((function(){s("Add To Library")}))}return Object(v.jsxs)("div",{className:O.root,children:[Object(v.jsxs)("div",{className:O.top,children:[Object(v.jsxs)("div",{className:O.leftRight,children:[Object(v.jsx)("div",{className:O.leftSide,children:Object(v.jsx)("img",{src:"".concat(g).concat(n.thumbnailUrl),alt:"Manga Thumbnail"})}),Object(v.jsxs)("div",{className:O.rightSide,children:[Object(v.jsx)("h1",{children:n.title}),Object(v.jsxs)("h3",{children:["Author:"," ",Object(v.jsx)("span",{children:Gt(n.author)})]}),Object(v.jsxs)("h3",{children:["Artist:"," ",Object(v.jsx)("span",{children:Gt(n.artist)})]}),Object(v.jsxs)("h3",{children:["Status:"," ",n.status]}),Object(v.jsxs)("h3",{children:["Source:"," ",(b=n.source,null!==b.name?"".concat(b.name," (").concat(b.lang.toLocaleUpperCase(),")"):b.id)]})]})]}),Object(v.jsxs)("div",{className:O.buttons,children:[Object(v.jsx)("div",{children:Object(v.jsxs)(f.a,{onClick:function(){return m()},children:["In Library"===i&&Object(v.jsx)(Ut.a,{}),"In Library"!==i&&Object(v.jsx)(Ht.a,{}),Object(v.jsx)("span",{children:i})]})}),Object(v.jsx)("a",{href:n.url,target:"_blank",children:Object(v.jsxs)(f.a,{children:[Object(v.jsx)(Mt.a,{}),Object(v.jsx)("span",{children:"Open Site"})]})})]})]}),Object(v.jsxs)("div",{className:O.bottom,children:[Object(v.jsxs)("div",{className:O.description,children:[Object(v.jsx)("h4",{children:"About"}),Object(v.jsx)("p",{children:n.description})]}),Object(v.jsx)("div",{className:O.genre,children:n.genre.split(", ").map((function(e){return Object(v.jsx)("h5",{children:e},e)}))})]})]})}var Yt=Object(h.a)({loading:{margin:"10px auto",display:"flex",justifyContent:"center"}});function Kt(e){var t=e.children,n=e.shouldRender,a=e.component,r=e.componentProps,i=Yt();if(n instanceof Function?n():n){if(a)return c.a.createElement(a,r);if(t)return Object(v.jsx)(v.Fragment,{children:t})}return Object(v.jsx)("div",{className:i.loading,children:Object(v.jsx)(qe.a,{thickness:5})})}var Qt=n(207),Zt=n(287),_t=n(283);function $t(e){return Object(v.jsx)(Qt.a,Object(Je.a)(Object(Je.a)({},e),{},{direction:"up"}))}function en(e){var t=e.message,n=e.severity,a=c.a.useState(!0),r=Object(o.a)(a,2),i=r[0],s=r[1],l=function(){s(!1)};return Object(v.jsx)(Zt.a,{open:i,onClose:l,autoHideDuration:3e3,TransitionComponent:$t,message:"I love snacks",children:Object(v.jsx)(_t.a,{elevation:6,variant:"filled",onClose:l,severity:n,children:t})})}function tn(e,t){var n=Math.floor(1e3*Math.random()),a=document.createElement("div");a.id="alert-".concat(n),document.body.appendChild(a),i.a.render(Object(v.jsx)(en,{message:e,severity:t}),a),setTimeout((function(){return function(e){var t=document.querySelector("#".concat(e));i.a.unmountComponentAtNode(t),document.body.removeChild(t)}(a.id)}),3500)}var nn=Object(h.a)((function(e){return{root:Object(St.a)({},e.breakpoints.up("md"),{display:"flex"}),chapters:Object(St.a)({listStyle:"none",padding:0,minHeight:"200px"},e.breakpoints.up("md"),{width:"50vw",height:"calc(100vh - 64px)",margin:0}),loading:{margin:"10px 0",display:"flex",justifyContent:"center"}}})),an=JSON.parse(window.localStorage.getItem("serverBaseURL")).replace("http","ws"),cn={status:"Stopped",queue:[]};function rn(){var e=nn(),t=Object(a.useContext)(y).setTitle;Object(a.useEffect)((function(){t("Manga")}),[]);var n=Object(l.h)().id,c=Object(a.useState)(),r=Object(o.a)(c,2),i=r[0],s=r[1],d=Object(a.useState)([]),u=Object(o.a)(d,2),j=u[0],b=u[1],h=Object(a.useState)(!1),p=Object(o.a)(h,2),g=p[0],O=p[1],f=Object(a.useState)(!1),m=Object(o.a)(f,2),x=m[0],w=m[1],k=Object(a.useState)(0),C=Object(o.a)(k,2),N=C[0],S=C[1],L=Object(a.useState)(),E=Object(o.a)(L,2)[1],R=Object(a.useState)(cn),T=Object(o.a)(R,2),I=T[0].queue,P=T[1];function D(){S(N+1)}Object(a.useEffect)((function(){var e=new WebSocket("".concat(an,"/api/v1/downloads"));return e.onmessage=function(e){var t=JSON.parse(e.data);P(t);var n=!1;t.queue.forEach((function(e){e.mangaId===(null===i||void 0===i?void 0:i.id)&&"Finished"===e.state&&(n=!0)})),n&&D()},E(e),function(){return e.close()}}),[I.length]);var F=function(e){var t="";return e.downloaded&&(t=" \u2022 Downloaded"),I.forEach((function(n){e.index===n.chapterIndex&&e.mangaId===n.mangaId&&(t=" \u2022 Downloading (".concat(100*n.progress,"%)"))})),t};return Object(a.useEffect)((function(){void 0!==i&&i.freshData||ve.get("/api/v1/manga/".concat(n,"/?onlineFetch=").concat(void 0!==i)).then((function(e){return e.data})).then((function(e){s(e),t(e.title)}))}),[i]),Object(a.useEffect)((function(){var e=g&&0===N;ve.get("/api/v1/manga/".concat(n,"/chapters?onlineFetch=").concat(e)).then((function(e){return e.data})).then((function(e){0===e.length&&g&&(tn("No chapters found","warning"),w(!0)),b(e)})).then((function(){return O(!0)}))}),[j.length,g,N]),Object(v.jsxs)("div",{className:e.root,children:[Object(v.jsx)(Kt,{shouldRender:void 0!==i,component:qt,componentProps:{manga:i}}),Object(v.jsx)(Kt,{shouldRender:j.length>0||x,children:Object(v.jsx)(Lt.a,{style:{height:"undefined",overflowY:window.innerWidth<960?"visible":"auto"},className:e.chapters,totalCount:j.length,itemContent:function(e){return Object(v.jsx)(Bt,{chapter:j[e],downloadingString:F(j[e]),triggerChaptersUpdate:D})},useWindowScroll:window.innerWidth<960,overscan:.5*window.innerHeight})})]})}var on=Object(h.a)((function(e){return{root:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:16},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12},icon:{width:e.spacing(7),height:e.spacing(7),flex:"0 0 auto",marginRight:16}}}));function sn(e){var t=on(),n=Object($e.a)(),a=e.episode,r=e.triggerEpisodesUpdate,i=a.uploadDate&&new Date(a.uploadDate).toISOString().slice(0,10),l=c.a.useState(null),d=Object(o.a)(l,2),u=d[0],j=d[1],b=function(){j(null)},h=function(e,t){b();var n=new FormData;n.append(e,t),ve.patch("/api/v1/anime/anime/".concat(a.animeId,"/episode/").concat(a.index),n).then((function(){return r()}))},p="dark"===n.palette.type?"#acacac":"#b0b0b0";return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("li",{children:Object(v.jsx)(se.a,{children:Object(v.jsxs)(le.a,{className:t.root,children:[Object(v.jsx)(s.b,{to:"/anime/".concat(a.animeId,"/episode/").concat(a.index),style:{textDecoration:"none",color:a.read?p:n.palette.text.primary},children:Object(v.jsx)("div",{style:{display:"flex"},children:Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(v.jsxs)(O.a,{variant:"h5",component:"h2",children:[Object(v.jsx)("span",{style:{color:n.palette.primary.dark},children:a.bookmarked&&Object(v.jsx)(Dt.a,{})}),a.name,a.episodeNumber>0&&" : ".concat(a.episodeNumber)]}),Object(v.jsxs)(O.a,{variant:"caption",display:"block",gutterBottom:!0,children:[a.scanlator,a.scanlator&&" ",i]})]})})}),Object(v.jsx)(f.a,{"aria-label":"more",onClick:function(e){j(e.currentTarget)},children:Object(v.jsx)(Rt.a,{})}),Object(v.jsxs)(Tt.a,{anchorEl:u,keepMounted:!0,open:Boolean(u),onClose:b,children:[Object(v.jsxs)(It.a,{onClick:function(){return h("bookmarked",!a.bookmarked)},children:[a.bookmarked&&"Remove bookmark",!a.bookmarked&&"Bookmark"]}),Object(v.jsxs)(It.a,{onClick:function(){return h("read",!a.read)},children:["Mark as"," ",a.read&&"unread",!a.read&&"read"]}),Object(v.jsx)(It.a,{onClick:function(){return h("markPrevRead",!0)},children:"Mark previous as Read"})]})]})})})})}function ln(e){return e||"UNKNOWN"}function dn(e){var t=Object(a.useContext)(y).setAction,n=e.manga;null==n.genre&&(n.genre="");var c=Object(a.useState)(n.inLibrary?"In Library":"Add To Library"),r=Object(o.a)(c,2),i=r[0],s=r[1],l=Object(a.useState)(!1),d=Object(o.a)(l,2),u=d[0],j=d[1];Object(a.useEffect)((function(){t("In Library"===i?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(f.a,{onClick:function(){return j(!0)},"aria-label":"display more actions",edge:"end",color:"inherit",children:Object(v.jsx)(ee.a,{})}),Object(v.jsx)(Xt,{open:u,setOpen:j,mangaId:n.id})]}):Object(v.jsx)(v.Fragment,{}))}),[i,u]);var b,p=J("serverBaseURL",""),g=Object(o.a)(p,1)[0],O=function(e){return Object(h.a)((function(t){var n;return{root:Object(St.a)({width:"100%"},t.breakpoints.up("md"),{position:"sticky",top:"64px",left:"0px",width:"50vw",height:"calc(100vh - 64px)",alignSelf:"flex-start",overflowY:"auto"}),top:{padding:"10px"},leftRight:{display:"flex"},leftSide:{"& img":{borderRadius:4,maxWidth:"100%",minWidth:"100%",height:"auto"},maxWidth:"50%"},rightSide:Object(St.a)({marginLeft:15,maxWidth:"100%","& span":{fontWeight:"400"}},t.breakpoints.up("lg"),{fontSize:"1.3em"}),buttons:{display:"flex",justifyContent:"space-around","& button":{color:"In Library"===e?"#2196f3":"inherit"},"& span":{display:"block",fontSize:"0.85em"},"& a":{textDecoration:"none",color:"#858585","& button":{color:"inherit"}}},bottom:(n={paddingLeft:"10px",paddingRight:"10px"},Object(St.a)(n,t.breakpoints.up("md"),{fontSize:"1.2em"}),Object(St.a)(n,t.breakpoints.up("lg"),{fontSize:"1.3em"}),n),description:{"& h4":{marginTop:"1em",marginBottom:0},"& p":{textAlign:"justify",textJustify:"inter-word"}},genre:{display:"flex",flexWrap:"wrap","& h5":{border:"2px solid #2196f3",borderRadius:"1.13em",marginRight:"1em",marginTop:0,marginBottom:"10px",padding:"0.3em",color:"#2196f3"}}}}))}(i)();function m(){"Add To Library"===i?ve.get("/api/v1/anime/anime/".concat(n.id,"/library/")).then((function(){s("In Library")})):ve.delete("/api/v1/anime/anime/".concat(n.id,"/library/")).then((function(){s("Add To Library")}))}return Object(v.jsxs)("div",{className:O.root,children:[Object(v.jsxs)("div",{className:O.top,children:[Object(v.jsxs)("div",{className:O.leftRight,children:[Object(v.jsx)("div",{className:O.leftSide,children:Object(v.jsx)("img",{src:"".concat(g).concat(n.thumbnailUrl,"?x=").concat(Math.random()),alt:"Manga Thumbnail"})}),Object(v.jsxs)("div",{className:O.rightSide,children:[Object(v.jsx)("h1",{children:n.title}),Object(v.jsxs)("h3",{children:["Author:"," ",Object(v.jsx)("span",{children:ln(n.author)})]}),Object(v.jsxs)("h3",{children:["Artist:"," ",Object(v.jsx)("span",{children:ln(n.artist)})]}),Object(v.jsxs)("h3",{children:["Status:"," ",n.status]}),Object(v.jsxs)("h3",{children:["Source:"," ",(b=n.source,null!==b.name?"".concat(b.name," (").concat(b.lang.toLocaleUpperCase(),")"):b.id)]})]})]}),Object(v.jsxs)("div",{className:O.buttons,children:[Object(v.jsx)("div",{children:Object(v.jsxs)(f.a,{onClick:function(){return m()},children:["In Library"===i&&Object(v.jsx)(Ut.a,{}),"In Library"!==i&&Object(v.jsx)(Ht.a,{}),Object(v.jsx)("span",{children:i})]})}),Object(v.jsx)("a",{href:n.url,target:"_blank",children:Object(v.jsxs)(f.a,{children:[Object(v.jsx)(Mt.a,{}),Object(v.jsx)("span",{children:"Open Site"})]})})]})]}),Object(v.jsxs)("div",{className:O.bottom,children:[Object(v.jsxs)("div",{className:O.description,children:[Object(v.jsx)("h4",{children:"About"}),Object(v.jsx)("p",{children:n.description})]}),Object(v.jsx)("div",{className:O.genre,children:n.genre.split(", ").map((function(e){return Object(v.jsx)("h5",{children:e},e)}))})]})]})}var un=Object(h.a)((function(e){return{root:Object(St.a)({},e.breakpoints.up("md"),{display:"flex"}),chapters:Object(St.a)({listStyle:"none",padding:0,minHeight:"200px"},e.breakpoints.up("md"),{width:"50vw",height:"calc(100vh - 64px)",margin:0}),loading:{margin:"10px 0",display:"flex",justifyContent:"center"}}}));function jn(){var e=un(),t=Object(a.useContext)(y).setTitle;Object(a.useEffect)((function(){t("Anime")}),[]);var n=Object(l.h)().id,c=Object(a.useState)(),r=Object(o.a)(c,2),i=r[0],s=r[1],d=Object(a.useState)([]),u=Object(o.a)(d,2),j=u[0],b=u[1],h=Object(a.useState)(!1),p=Object(o.a)(h,2),g=p[0],O=p[1],f=Object(a.useState)(!1),m=Object(o.a)(f,2),x=m[0],w=m[1],k=Object(a.useState)(0),C=Object(o.a)(k,2),N=C[0],S=C[1];function L(){S(N+1)}return Object(a.useEffect)((function(){void 0!==i&&i.freshData||ve.get("/api/v1/anime/anime/".concat(n,"/?onlineFetch=").concat(void 0!==i)).then((function(e){return e.data})).then((function(e){s(e),t(e.title)}))}),[i]),Object(a.useEffect)((function(){var e=g&&0===N;ve.get("/api/v1/anime/anime/".concat(n,"/episodes?onlineFetch=").concat(e)).then((function(e){return e.data})).then((function(e){0===e.length&&g&&(tn("No episodes found","warning"),w(!0)),b(e)})).then((function(){return O(!0)}))}),[j.length,g,N]),Object(v.jsxs)("div",{className:e.root,children:[Object(v.jsx)(Kt,{shouldRender:void 0!==i,component:dn,componentProps:{manga:i}}),Object(v.jsx)(Kt,{shouldRender:j.length>0||x,children:Object(v.jsx)(Lt.a,{style:{height:"undefined",overflowY:window.innerWidth<960?"visible":"auto"},className:e.chapters,totalCount:j.length,itemContent:function(e){return Object(v.jsx)(sn,{episode:j[e],triggerEpisodesUpdate:L})},useWindowScroll:window.innerWidth<960,overscan:.5*window.innerHeight})})]})}var bn=Object(h.a)((function(e){return{root:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:16},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12},icon:{width:e.spacing(7),height:e.spacing(7),flex:"0 0 auto",marginRight:16}}}));function hn(e){var t=e.extension,n=t.name,c=t.lang,r=t.versionName,i=t.installed,s=t.hasUpdate,l=t.obsolete,d=t.pkgName,u=t.iconUrl,j=e.notifyInstall,b=Object(a.useState)((function(){return l?"obsolete":s?"update":i?"uninstall":"install"})),h=Object(o.a)(b,2),p=h[0],g=h[1],f=J("serverBaseURL",""),m=Object(o.a)(f,1)[0],x=bn(),y="all"===c?"All":c.toUpperCase();function w(){g("uninstalling"),ve.get("/api/v1/extension/uninstall/".concat(d)).then((function(){j()}))}function k(){switch(p){case"install":g("installing"),ve.get("/api/v1/extension/install/".concat(d)).then((function(){g("uninstall"),j()}));break;case"update":g("updating"),ve.get("/api/v1/extension/update/".concat(d)).then((function(){g("uninstall"),j()}));break;case"obsolete":w(),setTimeout((function(){return window.location.reload()}),3e3);break;case"uninstall":w()}}return Object(v.jsx)(se.a,{children:Object(v.jsxs)(le.a,{className:x.root,children:[Object(v.jsxs)("div",{style:{display:"flex"},children:[Object(v.jsx)(de.a,{variant:"rounded",className:x.icon,alt:n,src:m+u}),Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(v.jsx)(O.a,{variant:"h5",component:"h2",children:n}),Object(v.jsxs)(O.a,{variant:"caption",display:"block",gutterBottom:!0,children:[y," ",r]})]})]}),Object(v.jsx)(q.a,{variant:"outlined",style:{color:"obsolete"===p?"red":"inherit"},onClick:function(){return k()},children:p})]})})}var pn=[];function gn(){var e=Object(a.useContext)(y),t=e.setTitle,n=e.setAction,r=J("shownExtensionLangs",[].concat(Object(X.a)(["en"]),["all"])),i=Object(o.a)(r,2),s=i[0],l=i[1];Object(a.useEffect)((function(){t("Extensions"),n(Object(v.jsx)(oe,{shownLangs:s,setShownLangs:l,allLangs:pn}))}),[s]);var d=Object(a.useState)([]),u=Object(o.a)(d,2),j=u[0],b=u[1],h=Object(a.useState)({}),p=Object(o.a)(h,2),g=p[0],O=p[1],f=Object(a.useState)(0),m=Object(o.a)(f,2),x=m[0],w=m[1];if(Object(a.useEffect)((function(){ve.get("/api/v1/extension/list").then((function(e){return e.data})).then((function(e){return b(e)}))}),[x]),Object(a.useEffect)((function(){if(j.length>0){var e=function(e){pn.length=0;var t={installed:[],"updates pending":[]};return e.sort((function(e,t){return e.apkName>t.apkName?1:-1})),e.forEach((function(e){void 0===t[e.lang]&&(t[e.lang]=[],"all"!==e.lang&&pn.push(e.lang)),e.installed?e.hasUpdate?t["updates pending"].push(e):t.installed.push(e):t[e.lang].push(e)})),pn.sort(ce),t}(j);O(e)}}),[j]),0===Object.entries(g).length)return Object(v.jsx)("h3",{children:"loading..."});var k=["updates pending","installed"].concat(Object(X.a)(s));return Object(v.jsx)(v.Fragment,{children:Object.entries(g).map((function(e){var t=Object(o.a)(e,2),n=t[0],a=t[1];return-1!==k.indexOf(n)&&a.length>0&&Object(v.jsxs)(c.a.Fragment,{children:[Object(v.jsx)("h1",{style:{marginLeft:25},children:ae(n)},n),a.map((function(e){return Object(v.jsx)(hn,{extension:e,notifyInstall:function(){w(x+1)}},e.apkName)}))]},n)}))})}function On(e){var t=Object(a.useContext)(y),n=t.setTitle,c=t.setAction;Object(a.useEffect)((function(){n("Source"),c(Object(v.jsx)(v.Fragment,{}))}),[]);var r=Object(l.h)().sourceId,i=Object(a.useState)([]),s=Object(o.a)(i,2),d=s[0],u=s[1],j=Object(a.useState)(!1),b=Object(o.a)(j,2),h=b[0],p=b[1],g=Object(a.useState)(1),O=Object(o.a)(g,2),f=O[0],m=O[1];return Object(a.useEffect)((function(){ve.get("/api/v1/source/".concat(r)).then((function(e){return e.data})).then((function(e){return n(e.name)}))}),[]),Object(a.useEffect)((function(){var t=e.popular?"popular":"latest";ve.get("/api/v1/source/".concat(r,"/").concat(t,"/").concat(f)).then((function(e){return e.data})).then((function(e){u([].concat(Object(X.a)(d),Object(X.a)(e.mangaList.map((function(e){return{title:e.title,thumbnailUrl:e.thumbnailUrl,id:e.id}}))))),p(e.hasNextPage)}))}),[f]),Object(v.jsx)(yt,{mangas:d,hasNextPage:h,lastPageNum:f,setLastPageNum:m})}var fn=n(276),mn=Object(h.a)({root:{height:"100%",width:"100%",display:"flex"},wrapper:{position:"relative",height:"100%"},gradient:{position:"absolute",top:0,width:"100%",height:"100%",background:"linear-gradient(to bottom, transparent, #000000)",opacity:.5},title:{position:"absolute",bottom:0,padding:"0.5em",color:"white"},image:{height:"100%",width:"100%"}}),xn=c.a.forwardRef((function(e,t){var n=e.manga,a=n.id,c=n.title,r=n.thumbnailUrl,i=mn(),l=J("serverBaseURL",""),d=Object(o.a)(l,1)[0];return Object(v.jsx)(Ot.a,{item:!0,xs:6,sm:4,md:3,lg:2,children:Object(v.jsx)(s.b,{to:"/anime/".concat(a,"/"),children:Object(v.jsx)(se.a,{className:i.root,ref:t,children:Object(v.jsx)(ft.a,{children:Object(v.jsxs)("div",{className:i.wrapper,children:[Object(v.jsx)(fn.a,{className:i.image,component:"img",alt:c,image:d+r,title:c}),Object(v.jsx)("div",{className:i.gradient}),Object(v.jsx)(O.a,{className:i.title,variant:"h5",component:"h2",children:c})]})})})})})}));function vn(e){var t,n=e.mangas,c=e.message,r=e.hasNextPage,i=e.lastPageNum,o=e.setLastPageNum,s=Object(a.useRef)(),l=function(){if(s.current){var e=s.current.getBoundingClientRect();(e.y+e.height)/window.innerHeight<2&&r&&o(i+1)}};return Object(a.useEffect)((function(){return window.addEventListener("scroll",l,!0),function(){window.removeEventListener("scroll",l,!0)}}),[r,n]),t=0===n.length?Object(v.jsx)("h3",{children:c}):n.map((function(e,t){return t===n.length-1?Object(v.jsx)(xn,{manga:e,ref:s}):Object(v.jsx)(xn,{manga:e})})),Object(v.jsx)(Ot.a,{container:!0,spacing:1,style:{margin:0,width:"100%",padding:"5px"},children:t})}function yn(e){var t=Object(a.useContext)(y),n=t.setTitle,c=t.setAction;Object(a.useEffect)((function(){n("Source"),c(Object(v.jsx)(v.Fragment,{}))}),[]);var r=Object(l.h)().sourceId,i=Object(a.useState)([]),s=Object(o.a)(i,2),d=s[0],u=s[1],j=Object(a.useState)(!1),b=Object(o.a)(j,2),h=b[0],p=b[1],g=Object(a.useState)(1),O=Object(o.a)(g,2),f=O[0],m=O[1];return Object(a.useEffect)((function(){ve.get("/api/v1/anime/source/".concat(r)).then((function(e){return e.data})).then((function(e){return n(e.name)}))}),[]),Object(a.useEffect)((function(){var t=e.popular?"popular":"latest";ve.get("/api/v1/anime/source/".concat(r,"/").concat(t,"/").concat(f)).then((function(e){return e.data})).then((function(e){u([].concat(Object(X.a)(d),Object(X.a)(e.mangaList.map((function(e){return{title:e.title,thumbnailUrl:e.thumbnailUrl,id:e.id}}))))),p(e.hasNextPage)}))}),[f]),Object(v.jsx)(vn,{mangas:d,hasNextPage:h,lastPageNum:f,setLastPageNum:m})}function wn(e){return"DoubleLTR"===e.readerType||"DoubleRTL"===e.readerType||"ContinuesHorizontalLTR"===e.readerType||"ContinuesHorizontalRTL"===e.readerType?{display:"block",marginLeft:"7px",marginRight:"7px",width:"auto",minHeight:"99vh",height:"auto",maxHeight:"99vh",objectFit:"contain",pointerEvents:"none"}:{display:"block",marginBottom:"ContinuesVertical"===e.readerType?"15px":0,minWidth:"50vw",width:"100%",maxWidth:"100%"}}vn.defaultProps={message:"loading..."};var kn=c.a.forwardRef((function(e,t){var n=e.src,c=e.index,r=e.onImageLoad,i=e.setCurPage,o=e.settings,s=function(e){return Object(h.a)({loading:{margin:"100px auto",height:"100vh",width:"100vw"},loadingImage:{height:"100vh",width:"70vw",padding:"50px calc(50% - 20px)",backgroundColor:"#525252",marginBottom:10},image:wn(e)})}(o)(),l=Object(a.useRef)(null),d=function(){if(l.current){var e=l.current.getBoundingClientRect();e.y<0&&e.y+e.height>0&&i(c)}},u=function(){if(l.current){var e=l.current.getBoundingClientRect();e.left<=window.innerWidth/2&&e.right>window.innerWidth/2&&i(c)}};return Object(a.useEffect)((function(){switch(o.readerType){case"Webtoon":case"ContinuesVertical":return window.addEventListener("scroll",d),function(){return window.removeEventListener("scroll",d)};case"ContinuesHorizontalLTR":case"ContinuesHorizontalRTL":return window.addEventListener("scroll",u),function(){return window.removeEventListener("scroll",u)};default:return function(){}}}),[d]),Object(v.jsx)("div",{ref:t,style:{margin:"0 auto"},children:Object(v.jsx)(mt,{src:n,onImageLoad:r,alt:"Page #".concat(c),imgRef:l,spinnerClassName:"".concat(s.image," ").concat(s.loadingImage),imgClassName:s.image})})}));function Cn(e){var t=e.pages,n=e.curPage,c=e.settings,r=e.setCurPage,i=e.prevChapter,o=e.nextChapter,s=function(e){return Object(h.a)({reader:{display:"flex",flexDirection:"ContinuesHorizontalLTR"===e.readerType?"row":"row-reverse",justifyContent:"ContinuesHorizontalLTR"===e.readerType?"flex-start":"flex-end",margin:"0 auto",width:"auto",height:"auto",overflowX:"visible",userSelect:"none"}})}(c)(),l=Object(a.useRef)(null),d=Object(a.useRef)([]);function u(){var e;n<t.length-1?(null===(e=d.current[n+1])||void 0===e||e.scrollIntoView({inline:"center"}),r((function(e){return e+1}))):c.loadNextonEnding&&o()}function j(){var e;n>0?(null===(e=d.current[n-1])||void 0===e||e.scrollIntoView({inline:"center"}),r(n-1)):0===n&&i()}var b=Object(a.useRef)(0);function p(e){window.scrollBy(b.current-e.pageX,0)}function g(e){var t;b.current=e.pageX,null===(t=l.current)||void 0===t||t.addEventListener("mousemove",p)}function O(){var e;null===(e=l.current)||void 0===e||e.removeEventListener("mousemove",p)}function f(e){e.clientX>=.85*window.innerWidth?"ContinuesHorizontalLTR"===c.readerType?u():j():e.clientX<=.15*window.innerWidth&&("ContinuesHorizontalLTR"===c.readerType?j():u())}var m=function(){"ContinuesHorizontalLTR"===c.readerType?window.scrollX+window.innerWidth>=document.body.scrollWidth&&o():"ContinuesHorizontalRTL"===c.readerType&&window.scrollX<=window.innerWidth&&o()};return Object(a.useEffect)((function(){var e;null===(e=d.current[n])||void 0===e||e.scrollIntoView({inline:"center"})}),[c.readerType]),Object(a.useEffect)((function(){var e,t;return null===(e=l.current)||void 0===e||e.addEventListener("mousedown",g),null===(t=l.current)||void 0===t||t.addEventListener("mouseup",O),function(){var e,t;null===(e=l.current)||void 0===e||e.removeEventListener("mousedown",g),null===(t=l.current)||void 0===t||t.removeEventListener("mouseup",O)}}),[l]),Object(a.useEffect)((function(){var e;return c.loadNextonEnding&&document.addEventListener("scroll",m),null===(e=l.current)||void 0===e||e.addEventListener("mousedown",f),function(){var e;document.removeEventListener("scroll",m),null===(e=l.current)||void 0===e||e.removeEventListener("mousedown",f)}}),[l,n]),Object(v.jsx)("div",{ref:l,className:s.reader,children:t.map((function(e){return Object(v.jsx)(kn,{index:e.index,src:e.src,onImageLoad:function(){},setCurPage:r,settings:c,ref:function(t){d.current[e.index]=t}},e.index)}))})}function Nn(e){var t=e.settings,n=e.curPage,a=e.pageCount,c=function(e){return Object(h.a)({pageNumber:{display:e.showPageNumber?"block":"none",position:"fixed",bottom:"50px",right:e.staticNav?"calc((100vw - 325px)/2)":"calc((100vw - 25px)/2)",width:"50px",textAlign:"center",backgroundColor:"rgba(0, 0, 0, 0.3)",borderRadius:"10px"}})}(t)();return Object(v.jsx)("div",{className:c.pageNumber,children:"".concat(n+1," / ").concat(a)})}var Sn=Object(h.a)({reader:{display:"flex",flexDirection:"row",justifyContent:"center",margin:"0 auto",width:"100%",height:"100vh"}});function Ln(e){var t=e.pages,n=e.settings,c=e.setCurPage,r=e.curPage,i=e.nextChapter,o=e.prevChapter,s=Sn(),l=Object(a.useRef)(null);function d(){r<t.length-1?c(r+1):n.loadNextonEnding&&i()}function u(){r>0?c(r-1):o()}function j(){"SingleLTR"===n.readerType?u():"SingleRTL"===n.readerType&&d()}function b(){"SingleLTR"===n.readerType?d():"SingleRTL"===n.readerType&&u()}function h(e){switch(e.code){case"Space":e.preventDefault(),d();break;case"ArrowRight":b();break;case"ArrowLeft":j()}}function p(e){e.clientX>window.innerWidth/2?b():j()}return Object(a.useEffect)((function(){var e;return document.addEventListener("keydown",h),null===(e=l.current)||void 0===e||e.addEventListener("click",p),function(){var e;document.removeEventListener("keydown",h),null===(e=l.current)||void 0===e||e.removeEventListener("click",p)}}),[l,r,n.readerType]),Object(v.jsx)("div",{ref:l,className:s.reader,children:Object(v.jsx)(kn,{index:r,onImageLoad:function(){},src:t[r].src,setCurPage:c,settings:n},r)})}var En=c.a.forwardRef((function(e,t){var n=e.image1src,a=e.image2src,c=e.index,r=function(e){return Object(h.a)({image:{display:"block",marginBottom:0,width:"auto",minHeight:"99vh",height:"auto",maxHeight:"99vh",objectFit:"contain"},page:{display:"flex",flexDirection:"DoubleLTR"===e.readerType?"row":"row-reverse",justifyContent:"center",margin:"0 auto",width:"auto",height:"auto",overflowX:"scroll"}})}(e.settings)();return Object(v.jsxs)("div",{ref:t,className:r.page,children:[Object(v.jsx)("img",{className:r.image,src:n,alt:"Page #".concat(c)}),Object(v.jsx)("img",{className:r.image,src:a,alt:"Page #".concat(c+1)})]})}));function Rn(e){var t=e.pages,n=e.settings,c=e.setCurPage,r=e.curPage,o=e.nextChapter,s=e.prevChapter,l=function(e){return Object(h.a)({preload:{display:"none"},reader:{display:"flex",flexDirection:"DoubleLTR"===e.readerType?"row":"row-reverse",justifyContent:"center",margin:"0 auto",width:"auto",height:"auto",overflowX:"scroll"}})}(n)(),d=Object(a.useRef)(null),u=Object(a.useRef)([]),j=Object(a.useRef)(0),b=Object(a.useRef)(Array(t.length).fill(!1));function p(){if(r<t.length-1){var e=r+j.current;c(e>=t.length?t.length-1:e)}else n.loadNextonEnding&&o()}function g(){if(r>0){var e=r-function(){for(var e=1;e<=2;e++)if(r-e>0&&u.current[r-e]&&b.current[r-e]){var t=u.current[r-e];if(t.height/t.width<1)return 1}return 2}();c(e<0?0:e)}else s()}function O(){"DoubleLTR"===n.readerType?g():p()}function f(){"DoubleLTR"===n.readerType?p():g()}function m(e){switch(e.code){case"Space":e.preventDefault(),p();break;case"ArrowRight":f();break;case"ArrowLeft":O()}}function x(e){e.clientX>window.innerWidth/2?f():O()}return Object(a.useEffect)((function(){var e,a=setInterval((function(){(!(r===t.length-1)&&b.current[r]&&b.current[r+1]||b.current[r])&&(!function(){if(j.current=0,r<t.length&&u.current[r]&&b.current[r]){j.current=1;var e=u.current[r];if(e.height/e.width<1)return}if(r+1<t.length&&u.current[r+1]&&b.current[r+1]){var n=u.current[r+1];if(n.height/n.width<1)return;j.current=2}}(),2===j.current?i.a.render(Object(v.jsx)(En,{index:r,image1src:t[r].src,image2src:t[r+1].src,settings:n},r),document.getElementById("display")):i.a.render(Object(v.jsx)(kn,{index:r,src:1===j.current?t[r].src:"",onImageLoad:function(){},setCurPage:c,settings:n},r),document.getElementById("display")),clearInterval(a))}),50);return document.addEventListener("keydown",m),null===(e=d.current)||void 0===e||e.addEventListener("click",x),function(){var e;clearInterval(a),document.removeEventListener("keydown",m),null===(e=d.current)||void 0===e||e.removeEventListener("click",x)}}),[d,r,n.readerType]),Object(v.jsxs)("div",{ref:d,children:[Object(v.jsx)("div",{id:"preload",className:l.preload,children:t.map((function(e){return Object(v.jsx)("img",{ref:function(t){u.current[e.index]=t},src:e.src,onLoad:(t=e.index,function(){b.current[t]=!0}),alt:"".concat(e.index)},"".concat(e.index));var t}))}),Object(v.jsx)("div",{id:"display",className:l.reader})]})}var Tn=Object(h.a)({reader:{display:"flex",flexDirection:"column",justifyContent:"center",margin:"0 auto",width:"100%"}});function In(e){var t=e.pages,n=e.settings,c=e.setCurPage,r=e.curPage,i=e.chapter,o=e.nextChapter,s=e.prevChapter,l=Tn(),d=Object(a.useRef)(null),u=Object(a.useRef)([]);function j(){var e;r<t.length-1?(null===(e=u.current[r+1])||void 0===e||e.scrollIntoView(),c((function(e){return e+1}))):n.loadNextonEnding&&o()}function b(){if(r>0){var e,t,n=u.current[r].getBoundingClientRect();if(n.y<0&&n.y+n.height>0)null===(e=u.current[r])||void 0===e||e.scrollIntoView();else null===(t=u.current[r-1])||void 0===t||t.scrollIntoView(),c(r-1)}else 0===r&&s()}function h(e){switch(e.code){case"Space":e.preventDefault(),j();break;case"ArrowRight":j();break;case"ArrowLeft":b()}}function p(e){e.clientX>window.innerWidth/2?j():b()}Object(a.useEffect)((function(){u.current=u.current.slice(0,t.length)}),[t.length]);var g=function(){window.innerHeight+window.scrollY>=document.body.offsetHeight&&o()};return Object(a.useEffect)((function(){var e;return n.loadNextonEnding&&document.addEventListener("scroll",g),document.addEventListener("keydown",h,!1),null===(e=d.current)||void 0===e||e.addEventListener("click",p),function(){var e;document.removeEventListener("scroll",g),document.removeEventListener("keydown",h),null===(e=d.current)||void 0===e||e.removeEventListener("click",p)}}),[d,r]),Object(a.useEffect)((function(){var e=i.lastPageRead;e>t.length-1&&(e=t.length-1),e>-1&&u.current[e].scrollIntoView()}),[u.current.length]),Object(v.jsx)("div",{ref:d,className:l.reader,children:t.map((function(e){return Object(v.jsx)(kn,{index:e.index,src:e.src,onImageLoad:function(){},setCurPage:c,settings:n,ref:function(t){u.current[e.index]=t}},e.index)}))})}var Pn=n(147),Dn=n.n(Pn),Fn=n(107),Bn=n.n(Fn),An=n(108),Un=n.n(An),Wn=n(149),Hn=n.n(Wn),zn=n(148),Mn=n.n(zn),Vn=n(157),Jn=n(278),Xn=n(285),Gn=n(277),qn=function(){return{staticNav:!1,showPageNumber:!0,continuesPageGap:!1,loadNextonEnding:!1,readerType:"ContinuesVertical"}};function Yn(e){var t=Object(a.useContext)(y).title,n=Object(l.g)(),c=e.settings,r=e.setSettings,i=e.manga,d=e.chapter,u=e.curPage,j=Object(a.useState)(c.staticNav),b=Object(o.a)(j,2),p=b[0],g=b[1],m=Object(a.useState)(!1),x=Object(o.a)(m,2),w=x[0],k=x[1],S=Object(a.useState)(0),L=Object(o.a)(S,2),E=L[0],R=L[1],T=Object(a.useState)(!0),I=Object(o.a)(T,2),P=I[0],D=I[1],F=function(e){return Object(h.a)({AppMainContainer:{display:"none"},AppRootElment:{display:"flex"},root:{position:e.staticNav?"sticky":"fixed",top:0,left:0,width:"300px",height:"100vh",overflowY:"auto",backgroundColor:"#0a0b0b","& header":{backgroundColor:"#363b3d",display:"flex",alignItems:"center",minHeight:"64px",paddingLeft:"24px",paddingRight:"24px",transition:"left 2s ease","& button":{flexGrow:0,flexShrink:0},"& button:nth-child(1)":{marginRight:"16px"},"& button:nth-child(3)":{marginRight:"-12px"},"& h1":{fontSize:"1.25rem",flexGrow:1}},"& hr":{margin:"0 16px",height:"1px",border:"0",backgroundColor:"rgb(38, 41, 43)"}},navigation:{margin:"0 16px","& > span:nth-child(1)":{textAlign:"center",display:"block",marginTop:"16px"},"& $navigationChapters":{display:"grid",gridTemplateColumns:"1fr 1fr",gridTemplateAreas:'"prev next"',gridColumnGap:"5px",margin:"10px 0","& a":{flexGrow:1,textDecoration:"none","& button":{width:"100%",padding:"5px 8px",textTransform:"none"}}}},navigationChapters:{},settingsCollapsseHeader:{"& span":{fontWeight:"bold"}},openDrawerButton:{position:"fixed",top:20,left:30,height:"40px",width:"40px",borderRadius:5,backgroundColor:"black","&:hover":{backgroundColor:"black"}}})}(c)(),A=function(e,t){return r(Object(Je.a)(Object(Je.a)({},c),{},Object(St.a)({},e,t)))},U=function(){var e=window.pageYOffset;Math.abs(e-E)>20&&(k(e>E),R(e))};return Object(a.useEffect)((function(){window.addEventListener("scroll",U);var e=document.querySelector("#root"),t=document.querySelector("#appMainContainer");return e.classList.add(F.AppRootElment),t.classList.add(F.AppMainContainer),function(){e.classList.remove(F.AppRootElment),t.classList.remove(F.AppMainContainer),window.removeEventListener("scroll",U)}}),[U]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Qt.a,{direction:"right",in:p,timeout:200,appear:!1,mountOnEnter:!0,unmountOnExit:!0,children:Object(v.jsxs)("div",{className:F.root,children:[Object(v.jsxs)("header",{children:[Object(v.jsx)(f.a,{edge:"start",color:"inherit","aria-label":"menu",disableRipple:!0,onClick:function(){return n.push("/manga/".concat(i.id))},children:Object(v.jsx)(Dn.a,{})}),Object(v.jsx)(O.a,{variant:"h1",children:t}),!c.staticNav&&Object(v.jsx)(f.a,{edge:"start",color:"inherit","aria-label":"menu",disableRipple:!0,onClick:function(){return g(!1)},children:Object(v.jsx)(Bn.a,{})})]}),Object(v.jsxs)(N.a,{ContainerComponent:"div",className:F.settingsCollapsseHeader,children:[Object(v.jsx)(B.a,{primary:"Reader Settings"}),Object(v.jsx)(te.a,{children:Object(v.jsxs)(f.a,{edge:"start",color:"inherit","aria-label":"menu",disableRipple:!0,disableFocusRipple:!0,onClick:function(){return D(!P)},children:[P&&Object(v.jsx)(Mn.a,{}),!P&&Object(v.jsx)(Hn.a,{})]})})]}),Object(v.jsx)(Gn.a,{in:P,timeout:"auto",unmountOnExit:!0,children:Object(v.jsxs)(C.a,{children:[Object(v.jsxs)(N.a,{children:[Object(v.jsx)(B.a,{primary:"Static Navigation"}),Object(v.jsx)(te.a,{children:Object(v.jsx)(_.a,{edge:"end",checked:c.staticNav,onChange:function(e){return A("staticNav",e.target.checked)}})})]}),Object(v.jsxs)(N.a,{children:[Object(v.jsx)(B.a,{primary:"Show page number"}),Object(v.jsx)(te.a,{children:Object(v.jsx)(_.a,{edge:"end",checked:c.showPageNumber,onChange:function(e){return A("showPageNumber",e.target.checked)}})})]}),Object(v.jsxs)(N.a,{children:[Object(v.jsx)(B.a,{primary:"Load next chapter at ending"}),Object(v.jsx)(te.a,{children:Object(v.jsx)(_.a,{edge:"end",checked:c.loadNextonEnding,onChange:function(e){return A("loadNextonEnding",e.target.checked)}})})]}),Object(v.jsxs)(N.a,{children:[Object(v.jsx)(B.a,{primary:"Reader Type"}),Object(v.jsxs)(Xn.a,{value:c.readerType,onChange:function(e){return A("readerType",e.target.value)},children:[Object(v.jsx)(It.a,{value:"SingleLTR",children:"Single Page (LTR)"}),Object(v.jsx)(It.a,{value:"SingleRTL",children:"Single Page (RTL)"}),Object(v.jsx)(It.a,{value:"DoubleLTR",children:"Double Page (LTR)"}),Object(v.jsx)(It.a,{value:"DoubleRTL",children:"Double Page (RTL)"}),Object(v.jsx)(It.a,{value:"Webtoon",children:"Webtoon"}),Object(v.jsx)(It.a,{value:"ContinuesVertical",children:"Continues Vertical"}),Object(v.jsx)(It.a,{value:"ContinuesHorizontalLTR",children:"Horizontal (LTR)"}),Object(v.jsx)(It.a,{value:"ContinuesHorizontalRTL",children:"Horizontal (RTL)"})]})]})]})}),Object(v.jsx)("hr",{}),Object(v.jsxs)("div",{className:F.navigation,children:[Object(v.jsxs)("span",{children:["Currently on page"," ",u+1," ","of"," ",d.pageCount]}),Object(v.jsxs)("div",{className:F.navigationChapters,children:[d.index>1&&Object(v.jsx)(s.b,{style:{gridArea:"prev"},to:"/manga/".concat(i.id,"/chapter/").concat(d.index-1),children:Object(v.jsxs)(q.a,{variant:"outlined",startIcon:Object(v.jsx)(Bn.a,{}),children:["Chapter"," ",d.index-1]})}),d.index<d.chapterCount&&Object(v.jsx)(s.b,{style:{gridArea:"next"},to:"/manga/".concat(i.id,"/chapter/").concat(d.index+1),children:Object(v.jsxs)(q.a,{variant:"outlined",endIcon:Object(v.jsx)(Un.a,{}),children:["Chapter"," ",d.index+1]})})]})]})]})}),Object(v.jsx)(Jn.a,{in:!p,children:Object(v.jsx)(Vn.a,{in:!w,children:Object(v.jsx)(f.a,{className:F.openDrawerButton,edge:"start",color:"inherit","aria-label":"menu",disableRipple:!0,disableFocusRipple:!0,onClick:function(){return g(!0)},children:Object(v.jsx)(Un.a,{})})})})]})}var Kn=function(){return{pageCount:-1,index:-1,chapterCount:0}};function Qn(){var e=J("readerSettings",qn),t=Object(o.a)(e,2),n=t[0],c=t[1],r=function(e){return Object(h.a)({root:{width:e.staticNav?"calc(100vw - 300px)":"100vw"},loading:{margin:"50px auto"}})}(n)(),i=Object(l.g)(),s=J("serverBaseURL",""),d=Object(o.a)(s,1)[0],u=Object(l.h)(),j=u.chapterIndex,b=u.mangaId,p=Object(a.useState)({id:+b,title:"",thumbnailUrl:""}),g=Object(o.a)(p,2),O=g[0],f=g[1],m=Object(a.useState)({pageCount:-1,index:-1,chapterCount:0}),x=Object(o.a)(m,2),w=x[0],k=x[1],C=Object(a.useState)(0),N=Object(o.a)(C,2),S=N[0],L=N[1],E=Object(a.useContext)(y),R=E.setOverride,T=E.setTitle;if(Object(a.useEffect)((function(){var e=re(n),t={staticNav:!1,showPageNumber:!0,continuesPageGap:!1,loadNextonEnding:!1,readerType:"ContinuesVertical"},a=!1;return Object.keys(t).forEach((function(c){var r=c;void 0===n[r]&&(e[r]=t[r],a=!0)})),a&&c(e),R({status:!0,value:Object(v.jsx)(Yn,{settings:n,setSettings:c,manga:O,chapter:w,curPage:S})}),function(){return R({status:!1,value:Object(v.jsx)("div",{})})}}),[O,w,n,S,j]),Object(a.useEffect)((function(){T("Reader"),ve.get("/api/v1/manga/".concat(b,"/")).then((function(e){return e.data})).then((function(e){f(e),T(e.title)}))}),[j]),Object(a.useEffect)((function(){k(Kn),ve.get("/api/v1/manga/".concat(b,"/chapter/").concat(j)).then((function(e){return e.data})).then((function(e){k(e),L(e.lastPageRead)}))}),[j]),Object(a.useEffect)((function(){if(-1!==S){var e=new FormData;e.append("lastPageRead",S.toString()),ve.patch("/api/v1/manga/".concat(O.id,"/chapter/").concat(w.index),e)}if(S===w.pageCount-1){var t=new FormData;t.append("read","true"),ve.patch("/api/v1/manga/".concat(O.id,"/chapter/").concat(w.index),t)}}),[S]),-1===w.pageCount)return Object(v.jsx)("div",{className:r.loading,children:Object(v.jsx)(qe.a,{thickness:5})});var I,P=(I=w.pageCount,Array.from({length:I},(function(e,t){return t}))).map((function(e){return{index:e,src:"".concat(d,"/api/v1/manga/").concat(b,"/chapter/").concat(j,"/page/").concat(e)}})),D=function(e){switch(e){case"ContinuesVertical":case"Webtoon":return In;case"SingleVertical":case"SingleRTL":case"SingleLTR":return Ln;case"DoubleVertical":case"DoubleRTL":case"DoubleLTR":return Rn;case"ContinuesHorizontalLTR":case"ContinuesHorizontalRTL":return Cn;default:return In}}(n.readerType);return Object(v.jsxs)("div",{className:r.root,children:[Object(v.jsx)(Nn,{settings:n,curPage:S,pageCount:w.pageCount}),Object(v.jsx)(D,{pages:P,pageCount:w.pageCount,setCurPage:L,curPage:S,settings:n,manga:O,chapter:w,nextChapter:function(){if(w.index<w.chapterCount){var e=new FormData;e.append("lastPageRead","".concat(w.pageCount-1)),e.append("read","true"),ve.patch("/api/v1/manga/".concat(O.id,"/chapter/").concat(w.index),e),i.push("/manga/".concat(O.id,"/chapter/").concat(w.index+1))}},prevChapter:function(){w.index>1&&i.push("/manga/".concat(O.id,"/chapter/").concat(w.index-1))}})]})}var Zn=Object(h.a)({root:{width:"calc(100vw - 10px)",height:"calc(100vh - 64px)"},loading:{margin:"50px auto"},video:{maxWidth:"100%",maxHeight:"100%"}}),_n=function(){return{linkUrl:"",index:-1,episodeCount:0}};function $n(){var e=Zn(),t=Object(l.h)(),n=t.episodeIndex,c=t.animeId,r=Object(a.useState)({linkUrl:"",index:-1,episodeCount:0}),i=Object(o.a)(r,2),s=i[0],d=i[1],u=Object(a.useState)(),j=Object(o.a)(u,2),b=j[0],h=j[1],p=Object(a.useContext)(y).setTitle;return Object(a.useEffect)((function(){p("Reader"),ve.get("/api/v1/anime/anime/".concat(c,"/")).then((function(e){return e.data})).then((function(e){p(e.title)}))}),[n]),Object(a.useEffect)((function(){d(_n),ve.get("/api/v1/anime/anime/".concat(c,"/episode/").concat(n)).then((function(e){return e.data})).then((function(e){d(e),h(e.linkUrl)}))}),[n]),""===s.linkUrl?Object(v.jsx)("div",{className:e.loading,children:Object(v.jsx)(qe.a,{thickness:5})}):Object(v.jsx)("div",{className:e.root,children:Object(v.jsx)("video",{className:e.video,controls:!0,children:Object(v.jsx)("source",{src:b})})})}var ea=Object(h.a)((function(e){return{root:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:16},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12},icon:{width:e.spacing(7),height:e.spacing(7),flex:"0 0 auto",marginRight:16}}}));function ta(e){var t=e.extension,n=t.name,c=t.lang,r=t.versionName,i=t.installed,s=t.hasUpdate,l=t.obsolete,d=t.pkgName,u=t.iconUrl,j=e.notifyInstall,b=Object(a.useState)((function(){return l?"obsolete":s?"update":i?"uninstall":"install"})),h=Object(o.a)(b,2),p=h[0],g=h[1],f=J("serverBaseURL",""),m=Object(o.a)(f,1)[0],x=ea(),y="all"===c?"All":c.toUpperCase();function w(){g("uninstalling"),ve.get("/api/v1/anime/extension/uninstall/".concat(d)).then((function(){j()}))}function k(){switch(p){case"install":g("installing"),ve.get("/api/v1/anime/extension/install/".concat(d)).then((function(){g("uninstall"),j()}));break;case"update":g("updating"),ve.get("/api/v1/anime/extension/update/".concat(d)).then((function(){g("uninstall"),j()}));break;case"obsolete":w(),setTimeout((function(){return window.location.reload()}),3e3);break;case"uninstall":w()}}return Object(v.jsx)(se.a,{children:Object(v.jsxs)(le.a,{className:x.root,children:[Object(v.jsxs)("div",{style:{display:"flex"},children:[Object(v.jsx)(de.a,{variant:"rounded",className:x.icon,alt:n,src:m+u}),Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(v.jsx)(O.a,{variant:"h5",component:"h2",children:n}),Object(v.jsxs)(O.a,{variant:"caption",display:"block",gutterBottom:!0,children:[y," ",r]})]})]}),Object(v.jsx)(q.a,{variant:"outlined",style:{color:"obsolete"===p?"red":"inherit"},onClick:function(){return k()},children:p})]})})}var na=[];function aa(){var e=Object(a.useContext)(y),t=e.setTitle,n=e.setAction,r=J("shownExtensionLangs",[].concat(Object(X.a)(["en"]),["all"])),i=Object(o.a)(r,2),s=i[0],l=i[1];Object(a.useEffect)((function(){t("Extensions"),n(Object(v.jsx)(oe,{shownLangs:s,setShownLangs:l,allLangs:na}))}),[s]);var d=Object(a.useState)([]),u=Object(o.a)(d,2),j=u[0],b=u[1],h=Object(a.useState)({}),p=Object(o.a)(h,2),g=p[0],O=p[1],f=Object(a.useState)(0),m=Object(o.a)(f,2),x=m[0],w=m[1];if(Object(a.useEffect)((function(){ve.get("/api/v1/anime/extension/list").then((function(e){return e.data})).then((function(e){return b(e)}))}),[x]),Object(a.useEffect)((function(){if(j.length>0){var e=function(e){na.length=0;var t={installed:[],"updates pending":[]};return e.sort((function(e,t){return e.apkName>t.apkName?1:-1})),e.forEach((function(e){void 0===t[e.lang]&&(t[e.lang]=[],"all"!==e.lang&&na.push(e.lang)),e.installed?e.hasUpdate?t["updates pending"].push(e):t.installed.push(e):t[e.lang].push(e)})),na.sort(ce),t}(j);O(e)}}),[j]),0===Object.entries(g).length)return Object(v.jsx)("h3",{children:"loading..."});var k=["updates pending","installed"].concat(Object(X.a)(s));return Object(v.jsx)(v.Fragment,{children:Object.entries(g).map((function(e){var t=Object(o.a)(e,2),n=t[0],a=t[1];return-1!==k.indexOf(n)&&a.length>0&&Object(v.jsxs)(c.a.Fragment,{children:[Object(v.jsx)("h1",{style:{marginLeft:25},children:ae(n)},n),a.map((function(e){return Object(v.jsx)(ta,{extension:e,notifyInstall:function(){w(x+1)}},e.apkName)}))]},n)}))})}var ca=n(150),ra=n.n(ca),ia=n(151),oa=n.n(ia),sa=JSON.parse(window.localStorage.getItem("serverBaseURL")).replace("http","ws"),la={status:"Stopped",queue:[]};function da(){var e=Object(a.useState)(),t=Object(o.a)(e,2)[1],n=Object(a.useState)(la),c=Object(o.a)(n,2),r=c[0],i=c[1],s=r.queue,l=r.status,d=Object($e.a)(),u=Object(a.useContext)(y),j=u.setTitle,b=u.setAction,h=function(){"Stopped"===l?ve.get("/api/v1/downloads/start"):ve.get("/api/v1/downloads/stop")};Object(a.useEffect)((function(){j("Download Queue"),b((function(){return"Stopped"===l?Object(v.jsx)(f.a,{onClick:h,children:Object(v.jsx)(ra.a,{})}):Object(v.jsx)(f.a,{onClick:h,children:Object(v.jsx)(oa.a,{})})}))}),[l]),Object(a.useEffect)((function(){var e=new WebSocket("".concat(sa,"/api/v1/downloads"));e.onmessage=function(e){i(JSON.parse(e.data))},t(e)}),[]);return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(Qe.a,{onDragEnd:function(e){},children:Object(v.jsx)(Qe.c,{droppableId:"droppable",children:function(e){return Object(v.jsxs)(C.a,{ref:e.innerRef,children:[s.map((function(e,t){return Object(v.jsx)(Qe.b,{draggableId:"".concat(e.mangaId,"-").concat(e.chapterIndex),index:t,children:function(t,n){return Object(v.jsxs)(N.a,Object(Je.a)(Object(Je.a)(Object(Je.a)({ContainerProps:{ref:t.innerRef}},t.draggableProps),t.dragHandleProps),{},{style:(a=n.isDragging,c=t.draggableProps.style,r=d.palette,Object(Je.a)(Object(Je.a)({},c),a&&{background:"dark"===r.type?"#424242":"rgb(235,235,235)"})),ref:t.innerRef,children:[Object(v.jsx)(S.a,{children:Object(v.jsx)(_e.a,{})}),Object(v.jsx)(B.a,{primary:"".concat(e.chapter.name," | ")+" (".concat(100*e.progress,"%)")+" => state: ".concat(e.state)})]}));var a,c,r}},"".concat(e.mangaId,"-").concat(e.chapterIndex))})),e.placeholder]})}})})})}function ua(){var e=Object(a.useState)("Tachidesk"),t=Object(o.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(Object(v.jsx)("div",{})),h=Object(o.a)(i,2),p=h[0],g=h[1],O=Object(a.useState)({status:!1,value:Object(v.jsx)("div",{})}),f=Object(o.a)(O,2),m=f[0],x=f[1],k=J("darkTheme",!0),C=Object(o.a)(k,2),N=C[0],S=C[1],L={title:n,setTitle:r,action:p,setAction:g,override:m,setOverride:x},E={darkTheme:N,setDarkTheme:S},R=c.a.useMemo((function(){return Object(j.a)({palette:{type:N?"dark":"light"},overrides:{MuiCssBaseline:{"@global":{"*::-webkit-scrollbar":{width:"10px",background:N?"#222":"#e1e1e1"},"*::-webkit-scrollbar-thumb":{background:N?"#111":"#aaa",borderRadius:"5px"}}}}})}),[N]);return Object(v.jsx)(s.a,{children:Object(v.jsx)(b.a,{theme:R,children:Object(v.jsxs)(y.Provider,{value:L,children:[Object(v.jsx)(u.a,{}),Object(v.jsx)(M,{}),Object(v.jsx)(d.a,{id:"appMainContainer",maxWidth:!1,disableGutters:!0,style:{paddingTop:"64px"},children:Object(v.jsxs)(l.d,{children:[Object(v.jsx)(l.b,{exact:!0,path:"/",render:function(){return Object(v.jsx)(l.a,{to:"/library"})}}),Object(v.jsx)(l.b,{path:"/settings/about",children:Object(v.jsx)(Ke,{})}),Object(v.jsx)(l.b,{path:"/settings/categories",children:Object(v.jsx)(ot,{})}),Object(v.jsx)(l.b,{path:"/settings/backup",children:Object(v.jsx)(ht,{})}),Object(v.jsx)(l.b,{path:"/settings",children:Object(v.jsx)(w.Provider,{value:E,children:Object(v.jsx)(Ge,{})})}),Object(v.jsx)(l.b,{path:"/sources/:sourceId/search/",children:Object(v.jsx)(Nt,{})}),Object(v.jsx)(l.b,{path:"/manga/extensions",children:Object(v.jsx)(gn,{})}),Object(v.jsx)(l.b,{path:"/sources/:sourceId/popular/",children:Object(v.jsx)(On,{popular:!0})}),Object(v.jsx)(l.b,{path:"/sources/:sourceId/latest/",children:Object(v.jsx)(On,{popular:!1})}),Object(v.jsx)(l.b,{path:"/manga/sources",children:Object(v.jsx)(ke,{})}),Object(v.jsx)(l.b,{path:"/manga/downloads",children:Object(v.jsx)(da,{})}),Object(v.jsx)(l.b,{path:"/manga/:mangaId/chapter/:chapterNum",children:Object(v.jsx)(v.Fragment,{})}),Object(v.jsx)(l.b,{path:"/manga/:id",children:Object(v.jsx)(rn,{})}),Object(v.jsx)(l.b,{path:"/library",children:Object(v.jsx)(kt,{})}),Object(v.jsx)(l.b,{path:"/anime/extensions",children:Object(v.jsx)(aa,{})}),Object(v.jsx)(l.b,{path:"/anime/sources/:sourceId/popular/",children:Object(v.jsx)(yn,{popular:!0})}),Object(v.jsx)(l.b,{path:"/anime/sources/:sourceId/latest/",children:Object(v.jsx)(On,{popular:!1})}),Object(v.jsx)(l.b,{path:"/anime/sources",children:Object(v.jsx)(Ee,{})}),Object(v.jsx)(l.b,{path:"/anime/:animeId/episode/:episodeIndex",children:Object(v.jsx)($n,{})}),Object(v.jsx)(l.b,{path:"/anime/:id",children:Object(v.jsx)(jn,{})})]})}),Object(v.jsx)(l.d,{children:Object(v.jsx)(l.b,{path:"/manga/:mangaId/chapter/:chapterIndex",render:function(e){return Object(v.jsx)(Qn,{},e.match.params.chapterIndex)}})})]})})})}n(204),n(205);i.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(ua,{})}),document.getElementById("root"))}},[[206,1,2]]]);
//# sourceMappingURL=main.b0d47073.chunk.js.map